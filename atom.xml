<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>alxz&#39;s code &amp; math</title>
  
  
  <link href="http://alxzzhou.github.io/atom.xml" rel="self"/>
  
  <link href="http://alxzzhou.github.io/"/>
  <updated>2022-10-21T15:34:31.546Z</updated>
  <id>http://alxzzhou.github.io/</id>
  
  <author>
    <name>alxz</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>BUAA OO U4 Review</title>
    <link href="http://alxzzhou.github.io/2022/10/21/BUAA-OO-U4-Review/"/>
    <id>http://alxzzhou.github.io/2022/10/21/BUAA-OO-U4-Review/</id>
    <published>2022-10-21T15:32:19.000Z</published>
    <updated>2022-10-21T15:34:31.546Z</updated>
    
    <content type="html"><![CDATA[<h1 id="buaa-oo-ç¬¬å››å•å…ƒæ€»ç»“-è¯¾ç¨‹æ€»ç»“">BUAA OO ç¬¬å››å•å…ƒæ€»ç»“ &amp; è¯¾ç¨‹æ€»ç»“</h1><h2 id="æ¦‚è¿°">ğŸ–Šæ¦‚è¿°</h2><p>â€‹ æœ¬å•å…ƒçš„ç›®æ ‡æ˜¯åœ¨è¯¾ç¨‹ç»„æä¾›çš„ UML è§£æç¨‹åºåŸºç¡€ä¹‹ä¸Šï¼Œå°è£…è‡ªå·±çš„ UML å…ƒç´ ç±»æ¥å»ºæ¨¡ã€æŒ‡ä»¤æŸ¥è¯¢å’ŒæŠ›å‡ºå¼‚å¸¸ç­‰ã€‚åœ¨æ­¤ä¹‹å‰éœ€è¦ç†Ÿæ‚‰ UML ç±»å›¾ã€é¡ºåºå›¾å’ŒçŠ¶æ€å›¾å„ä¸ªå…ƒç´ ä¹‹é—´çš„åŸºæœ¬å…³ç³»ï¼Œä»¥ä¾¿å»ºç«‹æ°å½“çš„æ¨¡å‹ã€‚</p><h2 id="æ¶æ„è®¾è®¡">ğŸ—ºæ¶æ„è®¾è®¡</h2><p><img src="/2022/10/21/BUAA-OO-U4-Review/image-20220623165433835.png" alt="å°è£…çš„ç±»å›¾" style="zoom:60%;"></p><p><img src="/2022/10/21/BUAA-OO-U4-Review/image-20220623165613658.png" alt="æ•´ä½“æ¶æ„" style="zoom:80%;"></p><p>â€‹ ä¸‰æ¬¡ä½œä¸šæ˜¯å¢é‡å¼€å‘çš„å…³ç³»ï¼Œæ¯æ¬¡ä½œä¸šåœ¨ä¹‹å‰çš„åŸºç¡€ä¸Šæ·»åŠ æ–°çš„åŠŸèƒ½ï¼ˆæ–°çš„æŸ¥è¯¢æŒ‡ä»¤æˆ–è€…æŠ›å‡ºå¼‚å¸¸ï¼‰ï¼Œæ€»ä½“éš¾åº¦è¾ƒä½ï¼Œä½†æ˜¯å·¥ä½œé‡ä¸å°ï¼Œéœ€è¦å…¼é¡¾åˆ°æ•´ä½“è®¾è®¡æ¶æ„çš„ç®€æ´æ€§å’Œå®ç°åŠŸèƒ½çš„æ­£ç¡®æ€§ã€‚</p><p>â€‹ å…¶ä¸­æœ‰ä¸‰ä¸ªç±»ï¼ˆ<code>ClassDiagram</code>ã€<code>SequenceDiagram</code>ã€<code>StateDiagram</code>ï¼‰æ˜¯å·¥å…·ç±»ï¼ŒåŒ…å«ä¸€äº›é™æ€æ–¹æ³•ä¾› <code>UserApiImpl</code> è°ƒç”¨ï¼Œå¦åˆ™ä¼šè¶…è¡Œæ•°ğŸ˜€ã€‚å¦å¤–ä¸ºäº†å»ºæ¨¡æ–¹ä¾¿ï¼Œæ„é€ æ–¹æ³•ä¸­ç»™å‡ºçš„ <code>UmlElement</code> çš„é¡ºåºä¸ä¸€å®šæ»¡è¶³éœ€è¦ï¼Œå› ä¸ºæœ‰äº›å…ƒç´ éœ€è¦æå‰å¤„ç†ï¼Œæ‰€ä»¥åœ¨å¼€å§‹çš„æ—¶å€™æˆ‘è¿›è¡Œäº†æ’åºï¼Œéƒ¨åˆ†ä»£ç ç‰‡æ®µå¦‚ä¸‹ã€‚ï¼ˆé€‰æ‹© <code>.stream ().sorted ()</code> çš„åŸå› æ˜¯ <code>UmlMessage</code> åœ¨åˆ—è¡¨ä¸­æ˜¯æŒ‰é¡ºåºæ’å¥½çš„ï¼Œéœ€è¦ä¿è¯æ’åºçš„ç¨³å®šæ€§ï¼Œå› æ­¤ä¸èƒ½ä½¿ç”¨æ™®é€šçš„ <code>.sort ()</code>ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">elementWeight</span><span class="params">(UmlElement e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (e <span class="keyword">instanceof</span> UmlClass ||</span><br><span class="line">            e <span class="keyword">instanceof</span> UmlStateMachine ||</span><br><span class="line">            e <span class="keyword">instanceof</span> UmlCollaboration) ? <span class="number">0</span> :</span><br><span class="line">            (e <span class="keyword">instanceof</span> UmlInterface ||</span><br><span class="line">                e <span class="keyword">instanceof</span> UmlRegion ||</span><br><span class="line">                    e <span class="keyword">instanceof</span> UmlInteraction) ? <span class="number">1</span> :</span><br><span class="line">                    (e <span class="keyword">instanceof</span> UmlOperation ||</span><br><span class="line">                        e <span class="keyword">instanceof</span> UmlPseudostate ||</span><br><span class="line">                            e <span class="keyword">instanceof</span> UmlState ||</span><br><span class="line">                            e <span class="keyword">instanceof</span> UmlFinalState ||</span><br><span class="line">                            e <span class="keyword">instanceof</span> UmlLifeline ||</span><br><span class="line">                            e <span class="keyword">instanceof</span> UmlEndpoint) ? <span class="number">2</span> :</span><br><span class="line">                            (e <span class="keyword">instanceof</span> UmlTransition) ? <span class="number">3</span> :</span><br><span class="line">                                    (e <span class="keyword">instanceof</span> UmlParameter ||</span><br><span class="line">                                            e <span class="keyword">instanceof</span> UmlEvent ||</span><br><span class="line">                                            e <span class="keyword">instanceof</span> UmlMessage ||</span><br><span class="line">                                            e <span class="keyword">instanceof</span> UmlAssociation) ? <span class="number">4</span> : <span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">UserApiImpl</span><span class="params">(UmlElement... elements)</span> </span>&#123;</span><br><span class="line">    ArrayList&lt;UmlElement&gt; elementList = <span class="keyword">new</span> ArrayList&lt;&gt;(Arrays.asList (elements));</span><br><span class="line">    elementList = (ArrayList&lt;UmlElement&gt;) elementList.stream ()</span><br><span class="line">            .sorted (Comparator.comparing (<span class="keyword">this</span>::elementWeight))</span><br><span class="line">            .collect (Collectors.toList ());</span><br><span class="line">    <span class="comment">// HANDLE UMLELEMENTS</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è®¾è®¡æ€ç»´å’Œ-oo-ç†è§£æ¼”è¿›">ğŸƒâ€â™€ï¸è®¾è®¡æ€ç»´å’Œ OO ç†è§£æ¼”è¿›</h2><h3 id="ç¬¬ä¸€å•å…ƒ">ç¬¬ä¸€å•å…ƒ</h3><p>â€‹ ç»è¿‡äº†å‡æœŸçš„ Pre è®­ç»ƒï¼Œæˆ‘å¯¹ Java è¯­æ³•å’Œé¢å‘å¯¹è±¡æœ‰äº†åˆæ­¥çš„è®¤è¯†ï¼Œä½†è¿˜æ˜¯è¢«ç¬¬ä¸€å•å…ƒéš¾ä½äº†ã€‚ï¼ˆx</p><p>â€‹ ç¬¬ä¸€å•å…ƒä¸­æœ€é‡è¦çš„ä¸€æ­¥æ˜¯æŠ½è±¡è¡¨è¾¾å¼å…ƒç´ çš„ç»“æ„å’Œç›¸äº’ä¹‹é—´çš„å…³ç³»ï¼Œæ¯”å¦‚ä¸‰è§’å‡½æ•°å¦‚ä½•å­˜å‚¨ã€å¦‚ä½•æ‰¾åˆ°è¡¨è¾¾å¼è®¡ç®—çš„å¥½æ–¹æ³•ç­‰ç­‰é—®é¢˜éƒ½æ˜¯å¿…é¡»è€ƒè™‘çš„ã€‚ç¬¬ä¸€æ¬¡ä½œä¸šå› ä¸ºæ²¡æœ‰å¼•å…¥å…¶ä»–å‡½æ•°å’Œå˜é‡ï¼Œå› æ­¤ä¸€ä¸ª <code>HashMap&lt;Integer, Integer&gt;</code> å®Œå…¨å¯ä»¥èƒœä»»ï¼Œä½†æ˜¯åœ¨åç»­çš„ä½œä¸šä¸­å°±ä¸å¾—ä¸é‡æ„äº†ï¼Œé—æ†¾çš„æ˜¯æˆ‘å½“æ—¶æ²¡æœ‰åœ¨æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„ç»“æ„ï¼Œå¯¼è‡´ä¸‰æ¬¡ä½œä¸šä¸­å®Œå…¨æ²¡æœ‰ç»§æ‰¿å…³ç³» + ä¸€äº›ç±»ä¸­çš„æ–¹æ³•å¾ˆè‡ƒè‚¿ï¼Œæœ‰çš„æ–¹æ³•ç”šè‡³å¥—äº†ä¸ƒå…«å±‚å¤§æ‹¬å·ï¼ˆå¹¸å¥½åªæœ‰ä¸‰æ¬¡ä½œä¸šğŸ˜€ï¼‰ã€‚</p><p>â€‹ å¹¸è¿çš„æ˜¯åœ¨ç¬¬ä¸€å•å…ƒä¸­æˆ‘æ·±åˆ»è®¤è¯†åˆ°é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³å’Œè®¾è®¡æ¨¡å¼çš„é‡è¦æ€§ï¼Œåœ¨ä¹‹åçš„ä½œä¸šä¸­åŠ ä»¥æ³¨æ„ï¼Œæ²¡æœ‰çŠ¯ç±»ä¼¼çš„é”™è¯¯ã€‚</p><h3 id="ç¬¬äºŒå•å…ƒ">ç¬¬äºŒå•å…ƒ</h3><p>â€‹ ç¬¬äºŒå•å…ƒä¸­æˆ‘ç¬¬ä¸€æ¬¡æ¥è§¦åˆ° Java å¤šçº¿ç¨‹çš„ç›¸å…³çŸ¥è¯†ï¼Œåœ¨å…¥é—¨çš„æ—¶å€™èŠ±äº†å¾ˆå¤šæ—¶é—´æ¥å­¦ä¹ å’Œæ„æ€ã€‚æœ€ç»ˆå¤§æ¦‚æ€è·¯æ˜¯æ„å»ºä¸€ä¸ªæˆ–è‹¥å¹²ä¸ªçº¿ç¨‹å®‰å…¨ç±»ï¼Œå…¶å®ä¾‹ä½œä¸ºçº¿ç¨‹ä¹‹é—´çš„ â€œæ¡¥æ¢â€ï¼Œæ¯ä¸ªçº¿ç¨‹ä¹‹é—´çš„é€»è¾‘æ˜¯ç›¸å¯¹ç‹¬ç«‹çš„ã€‚ç»†èŠ‚æ–¹é¢ä¸»è¦æ˜¯æ³¨æ„é”çš„ä½¿ç”¨å’Œ <code>synchronized</code> å—çš„èŒƒå›´ï¼ˆæˆ‘å°±å› æ­¤åœ¨ç¬¬ä¸€æ¬¡ä½œä¸šä¸­å‡ºç°äº† bugï¼‰ï¼Œä»¥åŠæ¶ˆé™¤è½®è¯¢ã€‚å› ä¸ºç¬¬ä¸€æ¬¡ä½œä¸šå»ºç«‹äº†ä¸€ä¸ªè¿˜ç®—åˆç†çš„æ¶æ„å’Œç”µæ¢¯è°ƒåº¦çš„ç®—æ³•ï¼ˆåé¢å°±æ²¡æœ‰åŠ¨è¿‡ï¼ŒLOLï¼‰ï¼Œæ‰€ä»¥åé¢ä¸¤æ¬¡ä½œä¸šå°±æ¯”è¾ƒé¡ºåˆ©ï¼Œçº¿ç¨‹ä¹‹é—´å¦‚ä½•æ²Ÿé€šã€åŒæ­¥ç­‰ç­‰éƒ½æ¯”è¾ƒç†Ÿç»ƒï¼Œä»£ç çš„é€»è¾‘æ€§å’Œæ¡ç†æ€§ä¹Ÿå¾—åˆ°äº†æå‡ã€‚</p><h3 id="ç¬¬ä¸‰å•å…ƒ">ç¬¬ä¸‰å•å…ƒ</h3><p>â€‹ ç¬¬ä¸‰å•å…ƒå­¦ä¹ äº† JML è¯­è¨€ä½“ç³»å¹¶ä¸”åˆæ­¥æ¥è§¦äº†å¥‘çº¦å¼ç¼–ç¨‹ï¼Œä¸»è¦æ˜¯æ ¹æ®ç»™å®šçš„è§„æ ¼æ¥æ„é€ ç¤¾äº¤ç½‘ç»œå¹¶å®ç°ç‰¹å®šçš„åŠŸèƒ½ã€‚ç®€å•æ¥è¯´å°±æ˜¯ç»™å®šä¸€ä¸ªæ¡†æ¶ï¼ŒåŒ…æ‹¬æ¡ä»¶ã€ç»“æœå’Œå½±å“ç­‰ç­‰ï¼Œå¦‚ä½•å®ç°è¿˜æ˜¯è§ä»è§æ™ºã€‚åœ¨ç¬¬ä¸‰å•å…ƒä¸­æˆ‘å­¦ä¹ äº†å¥‘çº¦å¼ç¼–ç¨‹çš„å®ç°å’Œç›¸å…³ç»†èŠ‚ï¼Œå¹¶ä¸”å¤ä¹ äº†ä¸€äº›å›¾è®ºç®—æ³•ï¼Œæ•´ä½“å·¥ä½œé‡ä¸Šæ¯”å‰ä¸¤ä¸ªå•å…ƒè¦å°‘å¾ˆå¤šã€‚</p><h3 id="ç¬¬å››å•å…ƒ">ç¬¬å››å•å…ƒ</h3><p>â€‹ ç¬¬å››å•å…ƒä¸»è¦æ˜¯å»ºç«‹ UML çš„æ¨¡å‹å¹¶å®ç°æŸ¥è¯¢å’ŒæŠ›å‡ºå¼‚å¸¸ç­‰åŠŸèƒ½ã€‚æ€»ä½“éš¾åº¦ä¸å¤§ï¼Œé‡ç‚¹æ˜¯è¦ç†Ÿæ‚‰ UML ç±»å›¾ã€é¡ºåºå›¾å’ŒçŠ¶æ€å›¾å„ä¸ªå…ƒç´ ä¹‹é—´çš„å…³ç³»ã€‚éœ€è¦æ³¨æ„çš„æ˜¯è¦ä»”ç»†é˜…è¯»æŒ‡å¯¼ä¹¦ï¼Œå®Œå…¨ç†è§£åŠŸèƒ½çš„å«ä¹‰å†ç€æ‰‹å†™ä»£ç ï¼Œå¦åˆ™å¾ˆå¯èƒ½ä¼šå‡ºç° bugã€‚</p><h2 id="æµ‹è¯•å®è·µçš„æ¼”è¿›">âœ”æµ‹è¯•å®è·µçš„æ¼”è¿›</h2><h3 id="ç¬¬ä¸€å•å…ƒ-1">ç¬¬ä¸€å•å…ƒ</h3><p>â€‹ ç¬¬ä¸€å•å…ƒçš„æµ‹è¯•ä¸»è¦åŸºäºæ‰‹åŠ¨æ„é€ æ ·ä¾‹çš„å½¢å¼å±•å¼€ï¼Œç»™å‡ºè‹¥å¹²ä¸ªæ¯”è¾ƒé•¿çš„æ•°æ®ç‚¹å¹¶å’Œç»“æœè¿›è¡Œæ¯”è¾ƒã€‚å…¶ä¸­æ¯”è¾ƒçš„è¿‡ç¨‹æˆ‘å€ŸåŠ©äº† <code>Mathematica</code> çš„å·¥å…·æ¥éªŒè¯ï¼Œæ¯”å¦‚ç»Ÿä¸€ä»£å…¥ 1 æ¯”è¾ƒç»“æœå³å¯ã€‚ç”±äºä¸¤ä¸ªä¸æ’ç­‰çš„è¡¨è¾¾å¼ä»£å…¥ä¹‹åè¯¯å·®å°äºé˜ˆå€¼çš„å¯èƒ½æ€§æå°ï¼Œå› æ­¤è¿™ç§éªŒè¯æ–¹æ³•è¿˜ç®—å¯é ã€‚å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ python çš„ç›¸å…³åº“æ¥å®ç°ã€‚</p><h3 id="ç¬¬äºŒå•å…ƒ-1">ç¬¬äºŒå•å…ƒ</h3><p>â€‹ ç¬¬äºŒå•å…ƒçš„æµ‹è¯•ä¹Ÿæ˜¯åŸºäºæ‰‹åŠ¨æ„é€ æ ·ä¾‹çš„å½¢å¼ï¼Œå¯ä»¥æ„é€ å¾ˆæç«¯çš„æ•°æ®ï¼ˆæ¯”å¦‚ç¬¬ 69.9 ç§’çš„æ—¶å€™çªç„¶å¢åŠ è‹¥å¹²è¯·æ±‚æ¥æµ‹è¯•é«˜å¹¶å‘æƒ…å†µä¸‹çš„æ­£ç¡®æ€§ï¼‰ã€‚åœ¨çº¿ç¨‹è½®è¯¢çš„æ’é™¤æ–¹é¢æˆ‘ä½¿ç”¨äº† <code>jcommander</code> æ¥è·Ÿè¸ªç¨‹åºè¿è¡Œçš„å„ç§çŠ¶æ€ã€‚é™¤æ­¤ä¹‹å¤–æˆ‘è¿˜ä½¿ç”¨äº†å®¤å‹å†™çš„å°ç¨‹åºï¼Œå®ƒå¯ä»¥å°†æ— åºä¸”æ‚ä¹±çš„è¾“å‡ºæŒ‰ç…§ç”µæ¢¯çš„åºå·æ¥ä¸€ä¸€æ•´ç†ï¼Œè¿™æ ·å°±èƒ½ç›´æ¥æŸ¥çœ‹å…·ä½“æŸä¸€éƒ¨ç”µæ¢¯çš„è¿è¡ŒçŠ¶æ€ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p><h3 id="ç¬¬ä¸‰å•å…ƒ-1">ç¬¬ä¸‰å•å…ƒ</h3><p>â€‹ ç¬¬ä¸‰å•å…ƒä¸ªäººæ„Ÿè§‰æŠŠæŒ‡å¯¼ä¹¦ä¸Šæ¯ä¸ªç»†èŠ‚éƒ½æ³¨æ„åˆ°å°±åŸºæœ¬ä¸Šä¸ä¼šæœ‰å¤ªå¤§é—®é¢˜ï¼Œä¸»è¦è¿˜æ˜¯æ€§èƒ½æ–¹é¢å¯èƒ½ä¼šé€ æˆ bugã€‚åœ¨å†™ç®—æ³•çš„æ—¶å€™è¦æ³¨æ„å¤æ‚åº¦å’Œå‡½æ•°è°ƒç”¨æ ˆç­‰ç­‰ï¼Œæ€»ä¹‹è¦æ—¶åˆ»æ³¨æ„å¯èƒ½å‡ºç°çš„è¶…æ—¶é—®é¢˜ï¼Œ~~ å› ä¸ºäº’æµ‹å¤§å®¶éƒ½æ˜¯ç”¨æç«¯æ•°æ®ç‚¸äººï½ï½ã€‚æµ‹è¯•æ–¹é¢æˆ‘åªå†™äº†ä¸€ä¸ªæµ‹è¯•æç«¯æ•°æ®çš„æ•°æ®ç”Ÿæˆå™¨ï¼Œä¸»è¦è¿˜æ˜¯é å’Œå®¤å‹å¯¹æ‹æ¥éªŒè¯ã€‚</p><h3 id="ç¬¬å››å•å…ƒ-1">ç¬¬å››å•å…ƒ</h3><p>â€‹ ç¬¬å››å•å…ƒå’Œç¬¬ä¸‰å•å…ƒç±»ä¼¼ï¼Œææ¸…æ¥šæŒ‡å¯¼ä¹¦å¹¶æŠŠè®¨è®ºåŒºçš„é—®é¢˜è¿‡ä¸€éå¯ä»¥å¸®åŠ©æ’é™¤ä¸€äº› bugï¼Œå½“ç„¶æœ€å¥½è¿˜æ˜¯ä»å¤´åˆ°å°¾æŠŠè‡ªå·±å†™çš„ç¨‹åºé€»è¾‘è¿‡ä¸€éï¼ˆå¯ä»¥è‡ªå·±ç»™è‡ªå·±è®²è®²å®ç°çš„æ€è·¯ï¼Œä¹Ÿè®¸ä¼šæ‰¾åˆ° bug ä¹Ÿè¯´ä¸å®šï¼‰ã€‚ç¬¬ä¸‰æ¬¡ä½œä¸šçš„å‹ç¼©åŒ…é‡Œç»™å‡ºäº†æ¯ä¸ªå¼‚å¸¸å¯¹åº”çš„ UML å›¾ï¼ŒæŠŠè¿™äº›éƒ½éªŒè¯ä¸€éå°±å¯ä»¥æ’é™¤å¾ˆå¤š bugã€‚</p><h2 id="è¯¾ç¨‹æ”¶è·">ğŸ™Œè¯¾ç¨‹æ”¶è·</h2><p>â€‹ è¿™ä¸€å­¦æœŸçš„è¯¾ç¨‹ä¸‹æ¥ï¼Œæœ€ç›´æ¥çš„æ”¶è·å½“ç„¶æ˜¯ä½“ä¼šäº†è§£å¹¶å†…åŒ–äº†é¢å‘å¯¹è±¡çš„æ€æƒ³å’Œä¸€äº›è®¾è®¡æ¨¡å¼ï¼Œé€æ¸æŠ›å¼ƒäº†ä¸€äº›é¢å‘è¿‡ç¨‹ç¼–ç¨‹çš„å°æ¯›ç—…ï¼Œå†™å‡ºæ¥çš„ä»£ç æ›´ä¼˜é›…ã€å¯è¯»æ€§æ›´å¼ºäº†ï¼ˆcheckstyle æ’ä»¶åŠŸä¸å¯æ²¡ï¼Œé€ƒï¼‰ã€‚</p><p>â€‹ é™¤æ­¤ä¹‹å¤–ä¸€ä¸ªè®©æˆ‘æ˜æ˜¾æ„Ÿè§‰åˆ°çš„æ”¶è·æ˜¯ï¼šä¸æ€•å†™ä»£ç äº†ã€‚å¦‚æœè¯´ä¸Šå­¦æœŸçš„è®¡ç»„è¿˜æ˜¯æˆ‘å¯¹ç ä»£ç è„±æ•çš„é¢„å¤‡æœŸï¼Œé‚£ä¹ˆè¿™å­¦æœŸç»è¿‡ OO å’Œ OS çš„åŒé‡è€ƒéªŒï¼Œæˆ‘æƒ³æˆ‘å¯¹å†™ä»£ç è¿™ä»¶äº‹å·²ç»æ²¡æœ‰äº†å¤§ä¸€æ—¶å€™éšéšçš„ææƒ§ã€‚æ¯æ¬¡ä½œä¸šåŠ¨è¾„ä¸Šåƒè¡Œä»£ç å’Œé‡æ„çš„ç»å†ä½¿æˆ‘åœ¨æ€è€ƒä»£ç æœ¬èº«çš„åŒæ—¶å¿…é¡»å…¼é¡¾åˆ°æ•´ä¸ªæ¶æ„çš„åˆç†æ€§å’Œå¤æ‚åº¦ï¼Œè¿™äº›éƒ½æ˜¯å†™ä»£ç å¿…å¤‡çš„èƒ½åŠ›ï¼Œä¼šå¾ˆå¤šç®—æ³•å’Œç¼–ç¨‹æŠ€å·§æ˜¯ä¸€æ–¹é¢ï¼Œæ‹¥æœ‰æ¶æ„è®¾è®¡å’Œç»„ç»‡çš„èƒ½åŠ›å¹¶åº”ç”¨åˆ°å®é™…ç¼–ç¨‹å½“ä¸­ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ã€‚</p><h2 id="ä¸€äº›å°å»ºè®®">ğŸ’«ä¸€äº›å°å»ºè®®</h2><ol type="1"><li>å¤šçº¿ç¨‹çš„ç›¸å…³çŸ¥è¯†å¯ä»¥æå‰ä¸‹æ”¾ï¼Œæ¯”å¦‚åœ¨é¢„ä¹ ä»»åŠ¡é‡Œç¨å¾®æ¶‰åŠä¸€ç‚¹ç‚¹ï¼Œæˆ–è€…å¹²è„†è®©ç¬¬äºŒå•å…ƒå¤šä¸€æ¬¡ä½œä¸šå¹¶ç æ‰ç¬¬ä¸‰æˆ–è€…ç¬¬å››å•å…ƒçš„ä¸€æ¬¡ä½œä¸šã€‚æœ¬å­¦æœŸç¬¬äºŒå•å…ƒç¬¬ä¸€æ¬¡ä½œä¸šå› ä¸ºå‡æœŸè€Œå»¶é•¿äº†å‡ å¤©æ—¶é—´ï¼Œè¿™å‡ å¤©æ—¶é—´åˆšåˆšå¥½è®©æˆ‘ç†Ÿæ‚‰äº†å¤šçº¿ç¨‹çš„çŸ¥è¯†å¹¶ç†æ¸…æ¥šäº†æ€è·¯ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯æ¯å­¦æœŸç¬¬äºŒå•å…ƒéƒ½æ°å·§èƒ½èµ¶ä¸Šä¸€æ¬¡å‡æœŸğŸ¤”ã€‚</li><li>å…³äºç ”è®¨è¯¾ï¼Œä¸ªäººè®¤ä¸ºå®‰æ’ä¸å¤Ÿåˆç†ï¼šä¸€æ–¹é¢ç•™ç»™å°ç»„è®¨è®ºå’Œå±•ç¤ºçš„æ—¶é—´æ¯”è¾ƒä»“ä¿ƒï¼›ä¸€æ–¹é¢åœ¨æŸäº›è®¨è®ºé¢˜ä¸‹å¤§å®¶å¾—å‡ºçš„ç»“è®ºå¯èƒ½æ˜¯æ¯”è¾ƒç›¸ä¼¼çš„ï¼Œä¸Šå°å±•ç¤ºå†…å®¹çš„é‡åˆåº¦ä¹Ÿæ¯”è¾ƒé«˜ï¼Œè¿™æ ·ä¸€æ¥å¤§å®¶çš„æ”¶è·ç›¸æ¯”èŠ±æ‰çš„æ—¶é—´æ¥è¯´ä¼šç›¸å¯¹å‡å°‘ã€‚å¯ä»¥é€‚å½“å»¶é•¿ä¸€äº›è®¨è®ºçš„æ—¶é—´å¹¶å‡å°‘ä¸Šå°å±•ç¤ºçš„äººæ•°ï¼Œæ¯”å¦‚å¯ä»¥ç­‰è®¨è®ºç»“æŸæŠ½ç­¾ä¸€äº›ç»„æ¥å±•ç¤ºï¼Œè¿™æ ·å¤§å®¶éƒ½æœ‰è¶³å¤Ÿçš„æœºä¼šå‚ä¸åˆ°è®¨è®ºå½“ä¸­ï¼Œä¹Ÿç»™å±•ç¤ºç¯èŠ‚å‡å°‘äº†è´Ÿæ‹…ï¼ˆä¸ªäººç»éªŒæ˜¯å‡ ä¹æ²¡æœ‰å“ªæ¬¡å¯ä»¥æ‰€æœ‰ç»„éƒ½è®²å®Œçš„ï¼‰ã€‚ç„¶åè¯¾ä¸‹å¯ä»¥æ‰€æœ‰äººç»´æŠ¤ä¸€ä¸ªè®¨è®ºè¯¾æ€»ç»“æ–‡æ¡£ï¼Œæ¯ä¸€ç»„æŠŠè®¨è®ºçš„ç»“æœå†™è¿›å»ï¼Œè¿™æ ·ä¹Ÿç»™æ²¡æœ‰å±•ç¤ºçš„å°ç»„è¡¥å……è§‚ç‚¹çš„æœºä¼šï¼Œdeadline è¿‡äº†ä¹‹åå†æ•´åˆä¸€ä¸‹æ–‡æ¡£å‘ç»™åŒå­¦é˜…è¯»ã€‚è¿™å­¦æœŸçš„ç ”è®¨è¯¾æ„Ÿè§‰è¯¾ä¸Šå¤§å®¶æ•´ä½“å‚ä¸åº¦ä¸æ˜¯å¤ªé«˜ï¼Œè¯¾ä¸‹æ€»ç»“æ–‡æ¡£æäº¤å®Œé—®å·æ˜Ÿå°±çŸ³æ²‰å¤§æµ·ï¼Œè¿™ä¸¤æ–¹é¢éƒ½å¯ä»¥æé«˜ä¸€äº›æ•ˆç‡ã€‚</li><li>äº’æµ‹é˜¶æ®µå¯ä»¥å¼€æ”¾ star çš„åŠŸèƒ½ã€‚å¦‚æœçœ‹åˆ°åŒæˆ¿é—´æœ‰åŒå­¦çš„ä»£ç å†™å¾—æ¯”è¾ƒä¼˜é›…ï¼Œå¯ä»¥ star æ ‡è®°ä¸€ä¸‹ï¼Œåœ¨æœ¬å•å…ƒç»“æŸä¹‹åå…¬å¸ƒä¸€ä¸‹è¿™äº›åŒå­¦çš„ä»£ç ä¾›åŒå­¦ä»¬å­¦ä¹ ã€‚ç„¶ååŒæˆ¿é—´è¢« star æœ€å¤šçš„åŒå­¦å¯ä»¥åœ¨äº’æµ‹æˆ–è€…å¼ºæµ‹ç¯èŠ‚é…Œæƒ…åŠ åˆ†ï¼ˆæˆ–è€…æ‰£åˆ†å‡å…ï¼‰ğŸ¤”ï¼Ÿä¹Ÿè®¸äº’æµ‹å¯ä»¥å¢åŠ  â€œstar ä¸€ä½åŒå­¦çš„ä»£ç â€ çš„è¦æ±‚ï¼Œå¹¶ä¸”éœ€è¦ä¸‹è½½æ‰€æœ‰ä»£ç ä¹‹åæ‰å¯ä»¥ starï¼Œè¿™æ ·ä¹Ÿç¬¦åˆäº’æµ‹çš„ç›®çš„ï¼Œå“ªæ€•ä¸è‚‰çœ¼ debug å…¶ä»–åŒå­¦çš„ä»£ç ï¼Œçœ‹çœ‹å…¶ä»–å®ç°æ–¹æ³•ä¹Ÿæ˜¯å¥½çš„ï¼ˆæ„Ÿè§‰å¤§å¤šæ•°åŒå­¦åˆ°åé¢å°±æ˜¯ç›´æ¥é€ æ•°æ® hack ä¸€ä¸ªç®—ä¸€ä¸ªï¼‰ã€‚åªæ˜¯ä¸€ä¸ªåˆæ­¥çš„æƒ³æ³•ï¼Œä¸ºäº†ä¿è¯å¹³è¡¡æ€§å¯èƒ½è¿˜æœ‰å¾ˆå¤šç»†èŠ‚è¦å®ç°ã€‚</li></ol>]]></content>
    
    
    <summary type="html">UML Modeling</summary>
    
    
    
    
    <category term="BUAA OO" scheme="http://alxzzhou.github.io/tags/BUAA-OO/"/>
    
  </entry>
  
  <entry>
    <title>BUAA OO U3 Review</title>
    <link href="http://alxzzhou.github.io/2022/10/21/BUAA-OO-U3-Review/"/>
    <id>http://alxzzhou.github.io/2022/10/21/BUAA-OO-U3-Review/</id>
    <published>2022-10-21T15:27:30.000Z</published>
    <updated>2022-10-21T15:31:07.204Z</updated>
    
    <content type="html"><![CDATA[<h1 id="buaa-oo-ç¬¬ä¸‰å•å…ƒæ€»ç»“">BUAA OO ç¬¬ä¸‰å•å…ƒæ€»ç»“</h1><h2 id="æ¦‚è¿°">ğŸ–Šæ¦‚è¿°</h2><p>â€‹ æœ¬å•å…ƒä½œä¸šçš„ç›®çš„æ˜¯å®Œæˆä¸€ä¸ªç¤¾äº¤å…³ç³»çš„æ¨¡æ‹Ÿç¨‹åºã€‚åœ¨æ­¤ç¤¾äº¤å…³ç³»è¢«æŠ½è±¡æˆä¸‰ä¸ªå¯¹è±¡ï¼š<code>Network, Group, Person</code>ï¼›<code>Person</code> å’Œ <code>Person/Group</code> ä¹‹é—´è¿˜å¯ä»¥å‘é€å„ç§ <code>Message</code>ã€‚æˆ‘ä»¬éœ€è¦æ ¹æ® JML æ¥å®Œæˆä¸€äº›æŒ‡ä»¤ï¼Œä»¥å®Œæˆé¢˜ç›®çš„è¦æ±‚ï¼Œå¦‚æŸ¥è¯¢ç»„å†…çš„ç¤¾äº¤å€¼ä¹‹ç±»çš„æ“ä½œã€‚æœ¬å•å…ƒçš„å®Œæˆéœ€è¦ç”¨åˆ°ä¸€äº›å›¾è®ºçš„åŸºç¡€ç®—æ³•ã€‚</p><h2 id="æ¶æ„è®¾è®¡">ğŸ—ºæ¶æ„è®¾è®¡</h2><p><img src="/2022/10/21/BUAA-OO-U3-Review/diagram.png"></p><p>ï¼ˆç‰ˆé¢æ‰€é™ï¼Œåªå±•ç¤ºæœ€ç»ˆçš„ç±»å›¾éƒ¨åˆ†å†…å®¹ï¼‰</p><p>â€‹ é™¤äº†é¢˜ç›®ä¸­å¿…é¡»å®ç°çš„æ¥å£å’Œç»§æ‰¿çš„å¼‚å¸¸ç±»ï¼Œæˆ‘åªæ·»åŠ äº†ä¸‰ä¸ªä¸»è¦çš„ç±»ï¼Œåˆ†åˆ«æ˜¯ï¼šå¼‚å¸¸è®¡æ•°å™¨ <code>ExceptionCounter</code>ã€å¹¶æŸ¥é›† <code>UnionCheck</code> å’Œè¾¹ <code>Edge</code>ã€‚å…¶ä¸­å¼‚å¸¸è®¡æ•°å™¨å’Œå¹¶æŸ¥é›†éƒ½ä½¿ç”¨äº†å•ä¾‹æ¨¡å¼æ–¹ä¾¿è®¿é—®å¹¶ä¿è¯äº†æ•°æ®çš„ä¸€è‡´æ€§ã€‚</p><p>â€‹ å¯¹äº <code>Edge</code>ï¼Œåªæ˜¯ç®€å•å­˜å‚¨äº†å…³ç³»çš„ä¸¤ä¸ªç«¯ç‚¹å’Œç¤¾äº¤å€¼ã€‚å¤§è‡´çš„å±æ€§å’Œæ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Edge</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> id1;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> id2;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> value;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Edge</span><span class="params">(<span class="keyword">int</span> id1, <span class="keyword">int</span> id2, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id1 = id1;</span><br><span class="line">        <span class="keyword">this</span>.id2 = id2;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id2;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ç®—æ³•è®¾è®¡">âœ”ç®—æ³•è®¾è®¡</h2><p>æœ¬æ–‡ä¸ä¼šè¯¦ç»†ä»‹ç»å„ä¸ªç®—æ³•çš„å…·ä½“åŸç†ï¼Œä»…è®¨è®ºåº”ç”¨æ–¹é¢çš„å†…å®¹ã€‚</p><h3 id="å¹¶æŸ¥é›†">ğŸ“±å¹¶æŸ¥é›†</h3><p>â€‹ <code>qci</code> æŒ‡ä»¤è¦æ±‚æŸ¥è¯¢ä¸¤ä¸ªäººä¹‹é—´çš„è¿é€šæ€§ï¼Œå³æ— å‘å›¾ä¸­ä¸¤ç‚¹çš„è¿é€šæ€§ï¼Œè€ƒè™‘ç”¨è·¯å¾„å‹ç¼©çš„å¹¶æŸ¥é›†å®ç°ï¼ˆä¸ç”¨è·¯å¾„å‹ç¼©ä¹Ÿå¯ä»¥ï¼‰ã€‚</p><p>â€‹ <code>UnionCheck</code> ç±»å°±æ˜¯å•ä¾‹æ¨¡å¼çš„å…¨å±€å¹¶æŸ¥é›†å®ç°ç±»ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UnionCheck</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> UnionCheck UNION = <span class="keyword">new</span> UnionCheck ();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> HashMap&lt;Integer, Integer&gt; DATA = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> UnionCheck <span class="title">fetch</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> UNION;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ArrayList&lt;Edge&gt; EDGES = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addPerson</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        DATA.put (id, id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> id1, <span class="keyword">int</span> id2)</span> </span>&#123;</span><br><span class="line">        DATA.compute (find (id1),(k, v) -&gt; find (id2));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (DATA.get (i) == i) &#123;</span><br><span class="line">            <span class="keyword">return</span> i;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//simplify</span></span><br><span class="line">            DATA.put (i, find (DATA.get (i)));</span><br><span class="line">            <span class="keyword">return</span> DATA.get (i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addEdge</span><span class="params">(Edge edge)</span> </span>&#123;</span><br><span class="line">        EDGES.add (edge);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;Edge&gt; <span class="title">getSortedEdges</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        EDGES.sort (Comparator.comparingInt (Edge::getValue));</span><br><span class="line">        <span class="keyword">return</span> EDGES;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹ å…¶ä¸­æœ€åä¸€ä¸ªæ–¹æ³• <code>getSortedEdge ()</code> æ˜¯ä¸ºäº†å®ç° <code>kruskal</code> ç®—æ³•è€Œä½¿ç”¨çš„ï¼Œç›®çš„æ˜¯å°†ç°å­˜çš„æ‰€æœ‰å…³ç³»ï¼ˆä¹Ÿå°±æ˜¯è¾¹ï¼‰æŒ‰ç…§ç¤¾äº¤å€¼ï¼ˆä¹Ÿå°±æ˜¯è¾¹æƒï¼‰ä»å°åˆ°å¤§æ’åºå¹¶è¿”å›ã€‚å½“ç„¶ä¹Ÿå¯ä»¥ç”¨ä¼˜å…ˆé˜Ÿåˆ—å®ç°ï¼Œè¿™æ ·å°±ä¸ç”¨æ¯æ¬¡è°ƒç”¨éƒ½æ’åºä¸€æ¬¡ï¼Œé™ä½äº†æ—¶é—´å¤æ‚åº¦ã€‚</p><h2 id="kruskal-ç®—æ³•">ğŸ’»Kruskal ç®—æ³•</h2><p>â€‹ <code>qlc</code> æŒ‡ä»¤éœ€è¦æˆ‘ä»¬ç»™å‡ºå›¾ä¸­åŒ…å«æŸä¸ªé¡¶ç‚¹çš„æœ€å°ç”Ÿæˆæ ‘çš„è¾¹æƒä¹‹å’Œã€‚æ ¹æ®æœ¬å•å…ƒä½œä¸šçš„æ•°æ®è§„æ¨¡ï¼Œåªéœ€è¦è€ƒè™‘ç¨€ç–å›¾çš„æƒ…å†µï¼Œäºæ˜¯é€‰ç”¨å¤æ‚åº¦ç›¸å¯¹è¾ƒä½çš„ <code>Kruskal</code> ç®—æ³•ã€‚å…¶ä¸­éœ€è¦é‡æ–°å»ºç«‹ä¸€ä¸ªé¡¶ç‚¹æ‰€åœ¨è¿é€šåˆ†é‡çš„å°è§„æ¨¡å¹¶æŸ¥é›†ï¼Œæ¯æ·»åŠ ä¸€æ¡è¾¹ä¹‹å‰éƒ½åˆ¤æ–­è·å¾—çš„è¾¹ä¹‹é—´ä¼šä¸ä¼šç”Ÿæˆç¯è·¯ã€‚å…·ä½“ä»£ç å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">queryLeastConnection</span><span class="params">(<span class="keyword">int</span> id)</span> <span class="keyword">throws</span> PersonIdNotFoundException </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!contains (id)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> PersonNotFoundExc (id);</span><br><span class="line">    &#125;</span><br><span class="line">    ArrayList&lt;Edge&gt; edges = UnionCheck.fetch ().getSortedEdges ();</span><br><span class="line">    ArrayList&lt;Edge&gt; originEdges = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    HashMap&lt;Integer, Integer&gt; union = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="comment">//initialize union &amp; originEdges</span></span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; edges.size (); i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((UnionCheck.fetch ().find (edges.get (i).getId1 ()) == UnionCheck.fetch ().find (id))) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!union.containsKey (edges.get (i).getId1 ())) &#123;</span><br><span class="line">                union.put (edges.get (i).getId1 (), edges.get (i).getId1 ());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!union.containsKey (edges.get (i).getId2 ())) &#123;</span><br><span class="line">                union.put (edges.get (i).getId2 (), edges.get (i).getId2 ());</span><br><span class="line">            &#125;</span><br><span class="line">            originEdges.add (edges.get (i));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//kruskal</span></span><br><span class="line">    <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> size = originEdges.size ();</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">        Edge e = originEdges.get (i);</span><br><span class="line">        <span class="keyword">int</span> a = e.getId1 ();</span><br><span class="line">        <span class="keyword">int</span> b = e.getId2 ();</span><br><span class="line">        <span class="keyword">int</span> val = e.getValue ();</span><br><span class="line">        <span class="keyword">if</span> (find (a, union) != find (b, union)) &#123;</span><br><span class="line">            merge (a, b, union);</span><br><span class="line">            ret += val;</span><br><span class="line">            cnt++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (cnt &gt;= union.size () - <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="dijkstra-ç®—æ³•">ğŸ§µDijkstra ç®—æ³•</h3><p>â€‹ <code>sim</code> æŒ‡ä»¤è¦æ±‚æˆ‘ä»¬ç»™å‡ºä¸¤ä¸ªäººä¹‹é—´çš„æœ€çŸ­è·¯å¾„ï¼Œè€ƒè™‘ä½¿ç”¨å¤æ‚åº¦è¾ƒä½ä¸”æ˜“äºå®ç°çš„ <code>Dijkstra</code> ç®—æ³•ã€‚åœ¨ç»´æŠ¤æ’åºçš„è·¯å¾„æ–¹é¢æˆ‘ä½¿ç”¨äº†ä¼˜å…ˆé˜Ÿåˆ—çš„æ–¹å¼ä»¥è·å¾—è¾ƒå¥½çš„æ€§èƒ½ã€‚å…·ä½“ä»£ç å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">sendIndirectMessage</span><span class="params">(<span class="keyword">int</span> id)</span> <span class="keyword">throws</span> MessageIdNotFoundException </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!containsMessage (id) || containsMessage (id) &amp;&amp; getMessage (id).getType () == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> MessageNotFoundExc (id);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> id1 = getMessage (id).getPerson1 ().getId ();</span><br><span class="line">    <span class="keyword">int</span> id2 = getMessage (id).getPerson2 ().getId ();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!isCircle (id1, id2)) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (PersonIdNotFoundException ignored) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    Person p1 = getPerson (id1);</span><br><span class="line">    Person p2 = getPerson (id2);</span><br><span class="line">    p1.addSocialValue (getMessage (id).getSocialValue ());</span><br><span class="line">    p2.addSocialValue (getMessage (id).getSocialValue ());</span><br><span class="line">    Message m = getMessage (id);</span><br><span class="line">    <span class="keyword">if</span> (m <span class="keyword">instanceof</span> RedEnvelopeMessage) &#123;</span><br><span class="line">        p1.addMoney (-((RedEnvImpl) m).getMoney ());</span><br><span class="line">        p2.addMoney (((RedEnvImpl) m).getMoney ());</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (m <span class="keyword">instanceof</span> EmojiMessage) &#123;</span><br><span class="line">        emojiHeatList.computeIfPresent (((EmojiMessage) m).getEmojiId (), (k, v) -&gt; v + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    ((LinkedList&lt;Message&gt;) p2.getMessages ()).addFirst (m);</span><br><span class="line">    messages.remove (m.getId ());</span><br><span class="line">    HashMap&lt;Integer, Integer&gt; distance = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    HashSet&lt;Person&gt; solved = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">    PriorityQueue&lt;Person&gt; unsolved =</span><br><span class="line">            <span class="keyword">new</span> PriorityQueue&lt;&gt;(Comparator.comparingInt (o -&gt; distance.get (o.getId ())));</span><br><span class="line">    <span class="keyword">for</span> (Person p : people.values ()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (p.equals (p1)) &#123;</span><br><span class="line">            distance.put (p.getId (), p.queryValue (p1));</span><br><span class="line">            solved.add (p);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            distance.put (p.getId (), p.isLinked (p1) ? p.queryValue (p1) : Integer.MAX_VALUE);</span><br><span class="line">            unsolved.add (p);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (!unsolved.isEmpty ()) &#123;</span><br><span class="line">        <span class="comment">//find the closest vertex around S in (V - S)</span></span><br><span class="line">        Person closestPerson = unsolved.poll ();</span><br><span class="line">        solved.add (closestPerson);</span><br><span class="line">        <span class="comment">//refresh the vertices around closestPerson in (V - S)</span></span><br><span class="line">        <span class="keyword">for</span> (Person pp : ((PersonImpl) closestPerson).getAcquaintance ().values ()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (distance.get (pp.getId ()) &gt;</span><br><span class="line">                    distance.get (closestPerson.getId ()) + closestPerson.queryValue (pp) &amp;&amp;</span><br><span class="line">                    unsolved.contains (pp) &amp;&amp; !solved.contains (pp)) &#123;</span><br><span class="line">                unsolved.remove (pp);</span><br><span class="line">                distance.put (pp.getId (),</span><br><span class="line">                        distance.get (closestPerson.getId ()) + closestPerson.queryValue (pp));</span><br><span class="line">                unsolved.add (pp);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> distance.get (id2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹ åˆå§‹çŠ¶æ€ä¸ºï¼š<code>V = &#123;StartPoint&#125;, S = VertexSet - &#123;StartPoint&#125;</code>ï¼Œ ç„¶åä¸æ–­åœ¨ <code>S</code> ä¸­å¯»æ‰¾ ** è·ç¦»ç‚¹é›† <code>V</code> æœ€è¿‘çš„ç‚¹ <code>P</code>**ï¼Œå°†å…¶ä» <code>V</code> ä¸­å»æ‰å¹¶åŠ å…¥ <code>S</code>ï¼Œæ›´æ–°æ‰€æœ‰ <code>S</code> ä¸­ç‚¹çš„è·ç¦»åè¿›å…¥ä¸‹ä¸€ä¸ªå¾ªç¯ç›´åˆ° <code>S = &#123;&#125;</code>ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªå¯ä»¥ä¼˜åŒ–æ€§èƒ½çš„ç‚¹ï¼Œé‚£å°±æ˜¯åœ¨æ›´æ–° <code>S</code> ä¸­å…¶ä»–ç‚¹çš„è·ç¦»æ—¶ä¸éœ€è¦ä¾¿åˆ©æ‰€æœ‰ç‚¹ï¼Œåªéœ€è¦åœ¨ <code>P</code> çš„é‚»å±…ä¹‹é—´å¯»æ‰¾å³å¯ï¼Œè€Œåœ¨æœ¬æ¬¡ä½œä¸šä¸­æ¯ä¸ªäººéƒ½è®°å½•äº†è‡ªå·±è®¤è¯†çš„äººçš„é›†åˆï¼Œæ‰€ä»¥ç›´æ¥éå†è¿™ä¸ªé›†åˆå¹¶æ›´æ–°è·ç¦»å³å¯ã€‚æœ€åçš„å®éªŒä¹Ÿè¯æ˜äº†è¿™æ ·çš„æ•ˆç‡æ˜¯å¾ˆé«˜çš„ã€‚</p><p>##ğŸˆæœ¬åœ°æµ‹è¯•æ•°æ®</p><p>â€‹ åœ¨è‡ªå·±çš„æœ¬åœ°æµ‹è¯•ä¸­ä¸»è¦æ˜¯éšæœºç”Ÿæˆçš„æ•°æ®ç‚¹ï¼Œå› ä¸ºç¨‹åºé¢„å…ˆè®¾è®¡äº†è®¸å¤šå¼‚å¸¸ï¼Œå¹¶æœ‰å¼‚å¸¸å¯¹åº”çš„ç‰¹æ®Šè¾“å‡ºï¼Œæ‰€ä»¥æ•°æ®ç‚¹å¯ä»¥éšæœºè¿›è¡Œç”Ÿæˆã€‚ä¸»è¦æ˜¯æ ¹æ® <code>Random rand; int p = rand.nextInt ();</code> ç»™å‡ºçš„ <code>p</code> å€¼è®¾ç½®ä¸€äº›åŒºé—´æ¥ç”Ÿæˆæ•°æ®ã€‚å½“ç„¶æ ¹æ®ä¸€äº›ç‰¹å®šæŒ‡ä»¤å¯ä»¥æ‰‹å†™ä¸€äº›å°è§„æ¨¡çš„é’ˆå¯¹æ€§æµ‹è¯•ç‚¹ã€‚</p><p>â€‹ åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­æˆ‘å€Ÿç”¨äº†å®¤å‹çš„è¯„æµ‹æœºè¿›è¡Œå¯¹æ‹ã€‚æ®æˆ‘æ‰€çŸ¥ï¼Œè¯¥è¯„æµ‹æœºå¯ä»¥ç”Ÿæˆéšæœºæµ‹è¯•ç‚¹å’Œé’ˆå¯¹æ€§æµ‹è¯•ç‚¹ã€‚é’ˆå¯¹æ€§æµ‹è¯•ç‚¹ä¸»è¦æ˜¯æµ‹è¯•éœ€è¦ç”¨åˆ°å›¾è®ºç®—æ³•çš„æŒ‡ä»¤ï¼ˆæ¯”å¦‚ <code>qgvs</code> å’Œ <code>sim</code> ç­‰ï¼‰ï¼Œç”Ÿæˆä¸€äº›æç«¯çš„æ•°æ®çœ‹æ˜¯å¦ä¼šè¶…æ—¶ã€‚</p><h2 id="æ€§èƒ½é—®é¢˜å’Œä¿®å¤æƒ…å†µ">ğŸ›°æ€§èƒ½é—®é¢˜å’Œä¿®å¤æƒ…å†µ</h2><h3 id="å¹¶æŸ¥é›†å‡ºç°-stackoverflow">1ï¸âƒ£å¹¶æŸ¥é›†å‡ºç° StackOverFlow</h3><p>â€‹ ç¬¬ä¸€æ¬¡ä½œä¸šå¹¶æŸ¥é›†ç±»ä¸­çš„ <code>find ()</code> å‡½æ•°ä½¿ç”¨äº†è·¯å¾„å‹ç¼©çš„æ–¹æ³•ï¼ŒæŠŠæ¯ä¸ªè¢«æŸ¥è¯¢çš„ç‚¹ç›´æ¥è¿æ¥åˆ°å…¶ç¥–å…ˆã€‚ç”±äºå½“æ—¶ä¸æ¸…æ¥š <code>HashMap</code> ä¸­çš„ <code>put ()</code> æ–¹æ³•é‡åˆ°é‡å¤çš„é”®ä¼šç›´æ¥æ”¹å†™ï¼Œæˆ‘ä½¿ç”¨äº† <code>computeIfPresent ()</code> æ–¹æ³•æ¥æ”¹å†™ã€‚è¿™ç§å¤„ç†æ–¹æ³•ä¼šåœ¨å‡½æ•°è¿­ä»£æ¬¡æ•°è¿‡å¤šçš„æƒ…å†µä¸‹å¯¼è‡´æ ˆæº¢å‡ºçš„å¼‚å¸¸ã€‚</p><h3 id="qgvs-æŒ‡ä»¤è¶…æ—¶">2ï¸âƒ£<code>qgvs</code> æŒ‡ä»¤è¶…æ—¶</h3><p>â€‹ <code>qgvs</code> æŒ‡ä»¤éœ€è¦è®¡ç®—ä¸€ä¸ªç»„å½“ä¸­æ¯ä¸ªäººå¯¹å…¶ä»–äººçš„ç¤¾äº¤å€¼çš„å’Œï¼Œè®¡ç®—ä¸€æ¬¡çš„æ—¶é—´å¤æ‚åº¦æ˜¯ <span class="math inline">\(O (n^2)\)</span>ï¼Œå› æ­¤äº’æµ‹ä¸­å¯èƒ½ä¼šæœ‰äººå¤§é‡è°ƒç”¨è¯¥æŒ‡ä»¤æ¥ hackã€‚æˆ‘é¦–å…ˆæƒ³åˆ°çš„è§£å†³åŠæ³•æ˜¯åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨ <code>qgvs k</code> çš„æ—¶å€™å°† <code>k</code> ç»„çš„å¯¹åº”å€¼ç®—å‡ºæ¥å¹¶å‚¨å­˜ï¼Œç„¶åä¹‹åæ¯æ¬¡è°ƒç”¨çš„æ—¶å€™åªéœ€è¯»å–å‚¨å­˜çš„å€¼å³å¯ã€‚å½“ç„¶åœ¨ <code>atg/dfg</code> ä¹‹åéœ€è¦ä¿®æ”¹å‚¨å­˜çš„å€¼ï¼Œéœ€è¦å°†ä¹‹å‰å‚¨å­˜çš„å€¼ <span class="math inline">\(val\)</span> åŠ ä¸Šæˆ–å‡å» <span class="math inline">\(2\sum_{p \in P&#39;s\ acquaintance} SV_p\)</span>ã€‚ä½†æ˜¯åœ¨å®ç°ä¹‹åæ€»æ˜¯æœ‰ bug å¹¶ä¸”æˆ‘ä¸€ç›´æ²¡æœ‰å‘ç°é—®é¢˜å‡ºåœ¨å“ªé‡Œï¼Œäºæ˜¯é‡‡ç”¨äº†ä¸€ä¸ªæ‹™åŠ£çš„æ–¹æ³•ï¼šç»´æŠ¤ä¸€ä¸ª <code>private boolean modified</code> æ¥è®°å½• â€œåœ¨ä¸Šæ¬¡ <code>qgvs</code> å¹¶å­˜å‚¨ä¹‹åè¿™ä¸ªç»„çš„æˆå‘˜æœ‰æ²¡æœ‰è¢«ä¿®æ”¹â€ï¼ˆåˆå§‹å€¼ä¸º <code>true</code>ï¼‰ï¼Œè¿™æ ·å¦‚æœè¿ç»­ <code>qgvs</code> è½°ç‚¸å°±ä¸ç”¨é‡æ–°è®¡ç®—ã€‚å½“ç„¶å¦‚æœè¾¹ä¿®æ”¹ç»„å†…æˆå‘˜è¾¹ <code>qgvs</code> åˆ™è¿˜æ˜¯æœ‰è¶…æ—¶çš„å¯èƒ½ï¼Œè¿™ä¹Ÿæ˜¯è¿«ä¸å¾—å·²çš„æ–¹æ³•ã€‚</p><h2 id="network-æ‹“å±•-jml">ğŸš€<code>Network</code> æ‹“å±• JML</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">/*@ public normal_behavior</span></span><br><span class="line"><span class="comment">@ ensure</span></span><br><span class="line"><span class="comment">@ (\exist i; 0 &lt;= i &amp;&amp; i &lt; advertisers.length;advertisers [i].isLinked (getMessage (id).getPerson2 ())) &amp;&amp; advertisers [i].isLinked (getMessage (id).getPerson1 ()))</span></span><br><span class="line"><span class="comment">@ assignable getMessage (id).getPerson2 ().messages</span></span><br><span class="line"><span class="comment">@ ensures getMessage (id).getPerson2 ().messages.length = (getMessage (id).getPerson2 ().messages.length) + 1 </span></span><br><span class="line"><span class="comment">@ ensures (\forall int i; 0 &lt;= i &amp;&amp; i &lt; \old (getMessage (id).getPerson2 ().getMessages ().size ());</span></span><br><span class="line"><span class="comment">@          \old (getMessage (id)).getPerson2 ().getMessages ().get (i+1) == \old (getMessage (id).getPerson2 ().getMessages ().get (i)));</span></span><br><span class="line"><span class="comment">@ ensures \old (getMessage (id)).getPerson2 ().getMessages ().get (0).equals (\old (getMessage (id)));</span></span><br><span class="line"><span class="comment">@ assignable getMessage (id).getPerson2 ().money</span></span><br><span class="line"><span class="comment">@ getMessage (id).getPerson2 ().money = \old (getMessage (id).getPerson2 ().money) + getMessage (id).getsocialValue ()</span></span><br><span class="line"><span class="comment">@ ensures &amp;!containsMessage (id) &amp;&amp; messages.length == \old (messages.length) - 1 &amp;</span></span><br><span class="line"><span class="comment">@         (\forall int i; 0 &lt;= i &amp;&amp; i &lt; \old (messages.length) &amp;&amp; \old (messages [i].getId ()) != id;</span></span><br><span class="line"><span class="comment">@         (\exists int j; 0 &lt;= j &amp;&amp; j &lt; messages.length; messages [j].equals (\old (messages [i]))));</span></span><br><span class="line"><span class="comment">@ also</span></span><br><span class="line"><span class="comment">@ public exceptional_behavior</span></span><br><span class="line"><span class="comment">@ signals (PersonIdNotFoundException e) </span></span><br><span class="line"><span class="comment">@ (\forall i; 0 &lt;= i &amp;&amp; i &lt; customers.length;!customers [i].equals (getMessage (id).getPerson1 ())) ||</span></span><br><span class="line"><span class="comment">@ (\forall i; 0 &lt;= i &amp;&amp; i &lt; producers.length;!producers [i].equals (getMessage (id).getPerson2 ()))</span></span><br><span class="line"><span class="comment">@ signals (RelationNotFoundException e) </span></span><br><span class="line"><span class="comment">@ (\forall i; 0 &lt;= i &amp;&amp; i &lt; advertisers.length;!advertisers [i].isLinked (getMessage (id).getPerson2 ())) || !advertisers [i].isLinked (getMessage (id).getPerson1 ()))</span></span><br><span class="line"><span class="comment">@*/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">purchase</span><span class="params">(<span class="keyword">int</span> personID)</span> <span class="keyword">throws</span> PersonIdMotFoundException, RelationNotFoundException</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*@ public normal_behavior</span></span><br><span class="line"><span class="comment">  @ requires contains (ads.getProducer ()) &amp;&amp; contains (ads.getAdvertiser ());</span></span><br><span class="line"><span class="comment">  @ assignable people [*].money, ((Producer) people [*]).sales;</span></span><br><span class="line"><span class="comment">  @ ensures (\forall int i;0 &lt;= i &amp;&amp; i &lt; people.length;</span></span><br><span class="line"><span class="comment">  @          (people [i] instanceof Producer &amp;&amp; ads.getProducer ().getId == people [i].getId ()) ==&gt;</span></span><br><span class="line"><span class="comment">  @           people [i].money = \old (people [i].getMoney ()) - (ads.getCost ()) +</span></span><br><span class="line"><span class="comment">  @           (\sum int j;0 &lt;= j &amp;&amp; j &lt; people.length &amp;&amp; people [j] instanceof Consumer &amp;&amp; ((Consumer) people [j]).wantsToBuy (ads.getProduct ());</span></span><br><span class="line"><span class="comment">  @            ads.getPrice ())));</span></span><br><span class="line"><span class="comment">  @ ensures (\forall int i;0 &lt;= i &amp;&amp; i &lt; people.length;</span></span><br><span class="line"><span class="comment">  @          (people [i] instanceof Producer &amp;&amp; ads.getProducer ().getId == people [i].getId ()) ==&gt;</span></span><br><span class="line"><span class="comment">  @           ((Producer) people [i]).sales = \old (((Producer) people [i]).getSales ()) + </span></span><br><span class="line"><span class="comment">  @           (\sum int j;0 &lt;= j &amp;&amp; j &lt; people.length &amp;&amp; people [j] instanceof Consumer &amp;&amp; ((Consumer) people [j]).wantsToBuy (ads.getProduct ());</span></span><br><span class="line"><span class="comment">  @            1)));</span></span><br><span class="line"><span class="comment">  @ ensures (\forall int i;0 &lt;= i &amp;&amp; i &lt; people.length;</span></span><br><span class="line"><span class="comment">  @          (people [i] instanceof Advertiser &amp;&amp; ads.getAdvertiser ().getId () == people [i].getId ()) ==&gt;</span></span><br><span class="line"><span class="comment">  @           people [i].money = \old (people [i].getMoney ()) + ads.getCost ());</span></span><br><span class="line"><span class="comment">  @ ensures (\forall int i;0 &lt;= i &amp;&amp; i &lt; people.length;</span></span><br><span class="line"><span class="comment">  @          (people [i] instanceof Consumer &amp;&amp; people [i].wantsToBuy (ads.getProduct ())) ==&gt;</span></span><br><span class="line"><span class="comment">  @           people [i].money = \old (people [i].getMoney ()) - ads.getPrice ());</span></span><br><span class="line"><span class="comment">  @ ensures (\forall int i;0 &lt;= i &amp;&amp; i &lt; people.lenght;</span></span><br><span class="line"><span class="comment">  @          !(people [i] instanceof Producer || people [i] instanceof Consumer || people [i] instanceof Advertiser) ==&gt;</span></span><br><span class="line"><span class="comment">  @           \not_assigned (people [i].money));</span></span><br><span class="line"><span class="comment">  @ also</span></span><br><span class="line"><span class="comment">  @ public exceptional_behavior</span></span><br><span class="line"><span class="comment">  @ signals (ProducerNotFoundException e) !contains (ads.getProducer ()) ||</span></span><br><span class="line"><span class="comment">  @                                       (contains (ads.getProducer ()) &amp;&amp; !(getPerson (ads.getProducer ()) instacnceof Producer));</span></span><br><span class="line"><span class="comment">  @ also</span></span><br><span class="line"><span class="comment">  @ public exceptional_behavior</span></span><br><span class="line"><span class="comment">  @ signals (AdvertiserNotFoundException e) contains (ads.getProducer ()) &amp;&amp; getPerson (ads.getProducer () instacnceof Producer)) &amp;&amp;</span></span><br><span class="line"><span class="comment">  @                                         (!contains (ads.getProducer ()) ||</span></span><br><span class="line"><span class="comment">  @                                          (contains (ads.getProducer ()) &amp;&amp; !(getPerson (ads.getProducer ()) instacnceof Producer)));</span></span><br><span class="line"><span class="comment">  @*/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">publishAdvertisement</span><span class="params">(Advertisement advertisement)</span> <span class="keyword">throws</span></span></span><br><span class="line"><span class="function">    ProducerNotFoundException, AdvertiserNotFoundException</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*@ public normal_behavior</span></span><br><span class="line"><span class="comment">@ requires containsProductId (productId);</span></span><br><span class="line"><span class="comment">@ ensures \result == productList (id).getSalesAmount ();</span></span><br><span class="line"><span class="comment">@ also</span></span><br><span class="line"><span class="comment">@ public exceptional_behavior</span></span><br><span class="line"><span class="comment">@ signals (ProductNotFoundException e) !containsProduct (productId);</span></span><br><span class="line"><span class="comment">@*/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">querySaleAmount</span><span class="params">(<span class="keyword">int</span> productId)</span> <span class="keyword">throws</span> ProductNotFoundExceptionï¼› </span></span><br></pre></td></tr></table></figure><h2 id="å¿ƒå¾—ä¸ä½“ä¼š">ğŸ¤”å¿ƒå¾—ä¸ä½“ä¼š</h2><p>â€‹ ç¬¬ä¸‰å•å…ƒæ˜¯äº’æµ‹çš„æœ€åä¸€ä¸ªå•å…ƒï¼Œæœ¬å­¦æœŸçš„åœ£æ¯æˆ˜äº‰ç»ˆäºå‘Šä¸€æ®µè½ã€‚<del>ï¼ˆæ‚²ï¼‰</del></p><p>â€‹ æœ¬å•å…ƒä½œä¸šç›¸æ¯”å‰ä¸¤ä¸ªå•å…ƒç¡®å®è¦ç®€å•ä¸€äº›ï¼Œå¦‚æœä¸å†™è¯„æµ‹æœºå’Œæµ‹è¯•ç‚¹ç”Ÿæˆç¨‹åºçš„è¯åŸºæœ¬ä¸Šæ²¡æœ‰ä»€ä¹ˆå‹åŠ›ã€‚å¯¹äºå¤§éƒ¨åˆ†å‡½æ•°æ¥è¯´åªè¦è·Ÿç€ JML å†™å°±å¯ä»¥ï¼ˆå¤§æ¦‚ï¼‰ä¿è¯æ­£ç¡®æ€§ï¼Œä¸€äº›éœ€è¦è€ƒè™‘å›¾è®ºç®—æ³•å’Œ JML å¾ˆé•¿çš„å‡½æ•°ä¹Ÿä¸ä¼šå¸¦æ¥å¾ˆå¤§è´Ÿæ‹…ã€‚ä¸è¿‡ç”±äº JML çš„å¤æ‚æ€§ï¼Œæœ‰ä¸€äº›ç»†èŠ‚å¾ˆå®¹æ˜“è¢«é—æ¼ï¼Œæ‰€ä»¥è¿™ä¸ªå•å…ƒæ¯”å‰ä¸¤ä¸ªå•å…ƒæ›´å®¹æ˜“å‡º bugã€‚å¥½åœ¨è¯¾ç¨‹ç»„å¥½å¿ƒæ²¡æœ‰åœ¨å¼ºæµ‹ä¸­å‡ºæç«¯æ•°æ®ï¼Œè¿™æ ·æˆ‘çš„ä¸¤ä¸ª bug æ²¡æœ‰å½±å“åˆ°å¼ºæµ‹ğŸ˜€ã€‚</p><p>â€‹ åŠ©æ•™è¯´è¿™å•å…ƒçš„é‡ç‚¹æ˜¯é˜…è¯» JML å¹¶ç»™å‡ºèƒ½ä¿è¯æ­£ç¡®æ€§çš„ä»£ç å®ç°ï¼Œè€Œä¸æ˜¯ç®—æ³•ã€‚ä¸ªäººæ„Ÿè§‰ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œç®—æ³•è¶…æ—¶é€ æˆçš„æŸå¤±ä¸€å®šæ¯”é—æ¼æŸäº›ç»†èŠ‚é€ æˆçš„æŸå¤±å¤§ï¼Œä½†æ˜¯å®ç°ç®—æ³•çš„è¿‡ç¨‹æ¯”é˜…è¯» JML è¦æœ‰è¶£å¾ˆå¤šï¼ˆåˆ’ï¼‰ã€‚è¯´åˆ°åº•ä¹Ÿæ˜¯ä¸ª tradeoff å§ï¼Œå¥‘çº¦å¼ç¼–ç¨‹èƒ½å¤Ÿä¿è¯ç¨‹åºå®ç°çš„æ­£ç¡®æ€§ï¼Œä¸å­˜åœ¨è‡ªç„¶è¯­è¨€çš„å¤šä¹‰æ€§ï¼Œä½†æ˜¯è¯»æ‡‚å¹¶ç†è§£ JML çš„å«ä¹‰å¹¶ä¸æ˜¯è½»æ¾çš„å·¥ä½œï¼Œæ¯”å¦‚æ±‚æœ€å°ç”Ÿæˆæ ‘å‡½æ•°çš„ JML å°±éå¸¸é•¿ï¼Œè€Œä¸” JML æ‰€è¡¨è¿°çš„å†…å®¹å¾ˆæŠ½è±¡ï¼Œå®Œå…¨ç†è§£éœ€è¦æ¥æ¥å›å›è¯»å¥½å‡ éã€‚ä¸ªäººæ„Ÿè§‰ JML åœ¨ä¸€äº›æƒ…å†µä¸‹å¯èƒ½ä¼šæµªè´¹æ—¶é—´ï¼šè¿˜æ˜¯ä¸Šé¢çš„ä¾‹å­ï¼Œéœ€æ±‚è€…å¯ä»¥ç›´æ¥ä¼ è¾¾ â€œæ±‚ç»„å†…åŒ…å«æŸä¸ªç‚¹çš„æœ€å°ç”Ÿæˆæ ‘â€ çš„ä¿¡æ¯ï¼Œè¿™æ ·æ¯” JML è¦ä¾¿æ·è®¸å¤šï¼Œä¹Ÿä¸ç”¨èŠ±è´¹å¿ƒæ€ç”¨æ•°ç»„æ¥æŠ½è±¡æ ‘çš„ç»“æ„ï¼Œåœ¨ç¼–å†™å’Œç†è§£ä¸¤ç«¯éƒ½è¦è€—è´¹ä¸å°‘ç²¾åŠ›ã€‚å½“ç„¶åœ¨å¤§å¤šæ•°ç¯å¢ƒä¸‹ä¸ºäº†ä¿è¯ä»£ç ä¸¥æ ¼çš„æ­£ç¡®æ€§ï¼Œä»¥åŠå®Œæ•´ä¸¥è°¨åœ°ä¼ è¾¾ç”¨æˆ·çš„è¯·æ±‚ï¼ˆæ®è£æ–‡æˆˆè€å¸ˆæ‰€è¨€ï¼Œç”¨æˆ·æ˜¯å¾ˆå¯æ€•çš„ğŸ˜±ï¼‰ï¼Œè¿˜æ˜¯æœ‰å¿…è¦è¿›è¡Œå¥‘çº¦å¼ç¼–ç¨‹çš„ã€‚</p>]]></content>
    
    
    <summary type="html">Social Network Emulating</summary>
    
    
    
    
    <category term="BUAA OO" scheme="http://alxzzhou.github.io/tags/BUAA-OO/"/>
    
  </entry>
  
  <entry>
    <title>BUAA OO U2 Review</title>
    <link href="http://alxzzhou.github.io/2022/05/26/BUAA-OO-U2-Review/"/>
    <id>http://alxzzhou.github.io/2022/05/26/BUAA-OO-U2-Review/</id>
    <published>2022-05-26T02:58:07.000Z</published>
    <updated>2022-10-21T14:31:35.260Z</updated>
    
    <content type="html"><![CDATA[<p>#ğŸ›°BUAA OO ç¬¬äºŒå•å…ƒæ€»ç»“</p><h2 id="ç¬¬äº”æ¬¡ä½œä¸š">âœç¬¬äº”æ¬¡ä½œä¸š</h2><h3 id="ç¨‹åºæ¶æ„">ğŸ ç¨‹åºæ¶æ„</h3><p><strong>ï¼ˆUML ç±»å›¾ä¸­çœç•¥äº†ä¸€äº›ä¸é‡è¦çš„ <code>getter&amp;setter</code> æ–¹æ³•å’Œæ„é€ æ–¹æ³•ï¼Œä¸‹åŒï¼‰</strong></p><p><img src="/2022/05/26/BUAA-OO-U2-Review/U2A1.png"></p><h4 id="é‡è¦ç±»æè¿°-è°ƒåº¦å™¨è®¾è®¡">ğŸ’¬é‡è¦ç±»æè¿° + è°ƒåº¦å™¨è®¾è®¡</h4><p>ğŸ¤ <strong><code>RequestQueue</code></strong>ï¼š</p><p>â€‹ ç¬¬ä¸€æ¬¡ä½œä¸šå¯¹äº <code>Request</code> çš„å¤„ç†æ¯”è¾ƒå¸¸è§„ï¼Œå°±æ˜¯å’Œå¤§éƒ¨åˆ†åŒå­¦ä¸€æ ·å†™äº†çº¿ç¨‹å®‰å…¨ç±» <code>RequestQueue</code> ä»¥ä¿è¯é‡è¦ç»“æ„è¢«å¤šçº¿ç¨‹åŒæ—¶è®¿é—®æ—¶çš„æ•°æ®å®‰å…¨ã€‚å†…éƒ¨åŒ…å« <code>ConcurrentLinkedQueue&lt;PersonRequest&gt;</code> ä½œä¸ºè¯·æ±‚è½½ä½“ï¼Œç›´æ¥åŒ…è£…å…¶è‡ªå¸¦çš„çº¿ç¨‹å®‰å…¨æ–¹æ³•ï¼ˆ<code>poll ()</code>ã€<code>peek ()</code> å’Œ <code>remove ()</code> ç­‰ç­‰ï¼‰å³å¯ã€‚çº¿ç¨‹å®‰å…¨çš„æ•°æ®ç»“æ„é™¤æ­¤ä¹‹å¤–è¿˜æœ‰ <code>ArrayBlockingQueue</code>ã€<code>ConcurrentHashMap/ConcurrentHashSet</code>ã€<code>Vector</code> å’Œ <code>CopyOnWriteArrayList</code> ç­‰ç­‰ï¼Œå¯ä»¥æ»¡è¶³ç»å¤§éƒ¨åˆ†çš„éœ€è¦äº†ã€‚</p><p>ğŸ¤ <strong><code>Elevator</code></strong>ï¼š</p><p>â€‹ ç”µæ¢¯çš„åŠŸèƒ½çš„å®ç°æˆ‘é‡‡ç”¨äº†çŠ¶æ€æ¨¡å¼ï¼Œå› ä¸ºç”µæ¢¯åœ¨è¿™é‡Œåªæœ‰å››ç§çŠ¶æ€ï¼š** å¼€é—¨ã€å…³é—¨ã€ç§»åŠ¨ã€ç­‰å¾… **ï¼Œå¹¶ä¸”å…¶ä¹‹é—´çš„è½¬æ¢éƒ½éµå¾ªä¸¥æ ¼çš„æ¡ä»¶ï¼Œäºæ˜¯ç”µæ¢¯å¯ä»¥æ‹¥æœ‰ä¸€ä¸ª <code>State</code> æ¥å£å­—æ®µï¼Œåœ¨çŠ¶æ€è½¬æ¢çš„æ—¶å€™ç”¨ <code>setter</code> æ–¹æ³•åˆ‡æ¢ä¸€ä¸ª <code>new StateXXX ()</code>ï¼Œå¹¶è°ƒç”¨å…¶ä¸­çš„æ–¹æ³• <code>behave ()</code> çš„å®ç°å³å¯ã€‚ä¸€å¼€å§‹å‡†å¤‡ä½¿ç”¨å·¥å‚æ¨¡å¼æ¥æ–°å»ºç”µæ¢¯çš„ï¼Œä½†æ˜¯ç”±äºæœ¬æ¬¡ä½œä¸šå¯¹æ–°å¢ç”µæ¢¯æ²¡æœ‰è€ƒå¯Ÿä¸”è¿è¡Œçš„ç”µæ¢¯åªæœ‰ä¸€ç§ï¼Œæ‰€ä»¥ä¸ºäº†ç®€ä¾¿å°±æš‚æ—¶æç½®ã€‚</p><p>ğŸ¤ <strong><code>InputHandler &amp; RequestDispatcher</code></strong>ï¼š</p><p>â€‹ è¿™ä¸¤ä¸ªç±»å…±åŒæŒæœ‰ä¸€ä¸ª <code>RequestQueue</code> å¯¹è±¡ <code>waitQueue</code>ï¼Œè¡¨ç¤ºç­‰å¾…é˜Ÿåˆ—ã€‚<code>InputHandler</code> ä»è¾“å…¥ä¸­è·å–çš„ <code>Request</code> è¢«é¦–å…ˆæ”¾å…¥æ­¤é˜Ÿåˆ—ç­‰å¾…ï¼Œç„¶å <code>RequestDispatcher</code> æ ¹æ®è¯·æ±‚çš„æ¥¼åº§åˆ†é…ç»™å¯¹åº”çš„ç”µæ¢¯å³å¯ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­è¦æ³¨æ„å…±äº«å¯¹è±¡çš„çº¿ç¨‹å®‰å…¨é—®é¢˜å¹¶ä½¿ç”¨ <code>notifyAll ()</code> åŠæ—¶å”¤é†’ç­‰å¾…åœ¨æ­¤å¯¹è±¡ä¸Šçš„çº¿ç¨‹ã€‚<code>RequestDispatcher</code> è¿˜æŒæœ‰ä¸€ä¸ª <code>ConcurrentHashMap&lt;Elevator.ElevatorType, RequestQueue&gt;</code> ç±»å‹çš„ <code>requestQueue</code>ï¼Œå®ƒå­˜å‚¨äº†æ¥¼åº§å’Œç”µæ¢¯è¯·æ±‚é˜Ÿåˆ—ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œåœ¨æœ¬æ¬¡ä½œä¸šä¸­æ¯ä¸ªæ¥¼åº§åªæœ‰ä¸€å°ç”µæ¢¯ï¼Œæ‰€ä»¥å¯ä»¥è¯´ä¸€ä¸ªæ¥¼åº§å…±ç”¨ä¸€ä¸ªè¯·æ±‚é˜Ÿåˆ—ï¼Œä¹Ÿå¯ä»¥è¯´ä¸€éƒ¨ç”µæ¢¯æ‹¥æœ‰ä¸€ä¸ªè¯·æ±‚é˜Ÿåˆ—ã€‚</p><p>ğŸ¤ <strong><code>Strategy</code></strong>ï¼š</p><p>â€‹ è€ƒè™‘åˆ°åç»­å¯èƒ½å‡ºç°ä¸åŒç§ç±»çš„ç”µæ¢¯ï¼Œå®ƒä»¬è¿è¡Œçš„ç­–ç•¥å„ä¸ç›¸åŒï¼Œäºæ˜¯åˆ›å»ºäº† <code>Strategy</code> æ¥å£ï¼Œè®©æ¯éƒ¨ç”µæ¢¯æŒæœ‰ä¸€ä¸ªå…¶å®ç°å¹¶è°ƒç”¨ <code>getNext ()</code> æ–¹æ³•ï¼Œè¿™æ ·å°±å¯ä»¥é€‚åº”å¤šç§ç”µæ¢¯çš„çŠ¶å†µã€‚åœ¨è¿™é‡Œçš„ç­–ç•¥æˆ‘çš„è®¾è®¡æ˜¯ï¼šç”µæ¢¯åœ¨ <code>StateWaiting</code> çŠ¶æ€åˆ¤æ–­æ˜¯å¦éœ€è¦è¿åŠ¨ï¼Œå¦‚æœéœ€è¦è¿åŠ¨ï¼Œåˆ™æ ¹æ® ** å½“å‰å¤–éƒ¨è¯·æ±‚é˜Ÿåˆ—ï¼ˆç­‰å¾…è¢«æ¥çš„è¯·æ±‚ï¼‰å’Œå†…éƒ¨è¯·æ±‚é˜Ÿåˆ—ï¼ˆç­‰å¾…é€è¾¾çš„è¯·æ±‚ï¼‰** æ¥åˆ¤æ–­ä¸‹ä¸€å±‚è¯¥å»å¾€å“ªé‡Œï¼Œç„¶åç›´æ¥åˆ‡æ¢åˆ° <code>StateMoving</code> çŠ¶æ€å¹¶æ›´æ”¹æ¥¼å±‚ &amp; è¾“å‡ºï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­ä¸ä¼šç†ç¬å¤–éƒ¨é˜Ÿåˆ—å¢åŠ çš„è¯·æ±‚ï¼Œå³ä¸ä¼šå› ä¸ºå¤–éƒ¨é˜Ÿåˆ—å¢åŠ çš„è¯·æ±‚è€Œåœ¨è¿åŠ¨é€”ä¸­æ›´æ”¹ç›®çš„åœ°æ¥¼å±‚ã€‚æ€»ä½“æ¥è¯´ç®—æ˜¯ä¸€ç§é™æ€ç­–ç•¥ï¼Œä½†æ˜¯æ•ˆç‡å°šå¯ï¼ŒåŒæ—¶é¿å…äº†åŠ¨æ€è§„åˆ’é€ æˆçš„çº¿ç¨‹ä¸å®‰å…¨æˆ–è€…æ­»é”ä¹‹ç±»çš„é—®é¢˜ã€‚</p><p>â€‹ å¤§è‡´çš„ç”µæ¢¯è°ƒåº¦ç­–ç•¥å‚è€ƒäº† look ç®—æ³•ï¼šä¼˜å…ˆåˆ¤æ–­ç”µæ¢¯è¿è¡Œçš„æ–¹å‘å‰æ–¹æ˜¯å¦è¿˜æœ‰ ** åŒæ–¹å‘ ** çš„ç›®çš„åœ°æ¥¼å±‚ï¼ˆå†…éƒ¨è¯·æ±‚çš„ç›®çš„åœ°æ¥¼å±‚å’Œå¤–éƒ¨è¯·æ±‚çš„èµ·å§‹æ¥¼å±‚ï¼‰ï¼Œå¦‚æœæœ‰åˆ™å»æ¥ / é€ï¼Œå¦åˆ™çœ‹æ˜¯å¦æœ‰ ** åæ–¹å‘ ** éœ€è¦æ¥çš„è¯·æ±‚ï¼Œæœ‰åˆ™å»æ¥è¯·æ±‚ï¼Œæ²¡æœ‰å°±è°ƒè½¬æ–¹å‘ã€‚æ³¨æ„å»å¾€ç›®çš„åœ°æ¥¼å±‚åå¦‚æœè¦æ¥è¯·æ±‚ï¼Œä¸èƒ½æŠŠè¯·æ±‚éƒ½æ¥è¿›æ¥ï¼Œè€Œæ˜¯åªæ¥ ** åŒæ–¹å‘ ** çš„è¯·æ±‚ã€‚è¿™é‡Œ <code>Strategy</code> å‚è€ƒä¸¤ä¸ªé˜Ÿåˆ—çš„è¯·æ±‚æ•°æ®è®¡ç®—å»å¾€æ¥¼å±‚æ—¶è¦åŒæ—¶è€ƒè™‘ç”µæ¢¯çš„æ–¹å‘å’Œè¯·æ±‚çš„æ–¹å‘ï¼Œå¹¶ä¸”æœ‰å¾ˆå¤šä¸´ç•Œæ¡ä»¶ï¼Œæ‰€ä»¥æ¯”è¾ƒå®¹æ˜“å‡º bugï¼ˆæ¯”å¦‚åœ¨åŒä¸€ä¸ªæ¥¼å±‚åå¤å¼€å…³é—¨ï¼Œå› ä¸ºæ²¡æœ‰å¯ä»¥æ¥åˆ°çš„è¯·æ±‚è€Œåˆæ²¡æœ‰è°ƒè½¬æ–¹å‘ï¼‰ã€‚</p><h4 id="é”çš„é€‰æ‹©å’ŒåŒæ­¥å—è®¾ç½®">ğŸ”’é”çš„é€‰æ‹©å’ŒåŒæ­¥å—è®¾ç½®</h4><p>â€‹ æœ¬å•å…ƒä¸‰æ¬¡ä½œä¸šæˆ‘éƒ½åªä½¿ç”¨äº† <code>synchronized</code> ä¿®é¥°åŒæ­¥å—ï¼Œæ²¡æœ‰ä½¿ç”¨å¦‚ <code>ReentrantLock</code> æˆ–è€… <code>Condition</code> ä¹‹ç±»çš„å¤šçº¿ç¨‹æ§åˆ¶ç±»ã€‚åœ¨åŒæ­¥å—çš„è®¾ç½®ä¸Šä¸»è¦æ³¨æ„ï¼š<code>synchronized</code> æ‹¬èµ·æ¥çš„éƒ¨åˆ†åº”å½“å°½å¯èƒ½å°ä»¥æé«˜å¤šçº¿ç¨‹è¿è¡Œçš„æ•ˆç‡ï¼ŒåŒæ—¶åˆéœ€è¦ä¿è¯å¯¹å…±äº«å¯¹è±¡çš„æ“ä½œè¦è¢«å®Œå…¨åŒ…å«ä»¥ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œè¿™æ˜¯éœ€è¦ä¸€äº›æƒè¡¡çš„ã€‚åœ¨æœ¬æ¬¡ä½œä¸šä¸­å¤§é¢ç§¯ <code>synchronized</code> å—ä¸»è¦å‡ºç°åœ¨å„ç§ <code>State</code> æ¥å£çš„å®ç°ç±»ä¸­ï¼Œå› ä¸ºç”µæ¢¯å¹¶æ²¡æœ‰å†™çº¿ç¨‹å®‰å…¨æ–¹æ³•ï¼ˆè™½ç„¶å…¶ä¸­åŒ…å«çš„ <code>RequestQueue</code> æ˜¯çº¿ç¨‹å®‰å…¨ç±»ï¼‰ï¼Œæ‰€ä»¥è¦åœ¨çŠ¶æ€è½¬æ¢ä¹‹é—´è‡ªå·±å®ç°ã€‚åœ¨æœ¬æ¬¡ä½œä¸šä¸­æˆ‘ç”±äº <code>synchronized</code> å—çš„èŒƒå›´è®¾ç½®ä¸å½“è€Œå‡ºç°äº†å·¨å¤§çš„ bugï¼Œ~~ è¿½æ‚”è«åŠï½ï½ã€‚</p><h3 id="å‡ºç°çš„-bug">â›”å‡ºç°çš„ bug</h3><p>æœ¬æ¬¡ä½œä¸šçš„ bug ä½“ç°åœ¨ä¸¤æ–¹é¢ï¼š</p><p>1ï¸âƒ£ï¼ˆä¸Šé¢æåˆ°çš„ï¼‰<code>Strategy</code> é€»è¾‘é”™è¯¯ï¼Œå¯èƒ½å¯¼è‡´åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ç”µæ¢¯è¢«å¡åœ¨åŒä¸€å±‚åå¤å¼€å…³é—¨ã€‚</p><p>** è§£å†³æ–¹æ³• **ï¼šæ”¹è¿›ç­–ç•¥ç±»ï¼Œå¯¹è¾¹ç•Œæ¡ä»¶å’Œç‰¹æ®Šæ•°æ®å……åˆ†è€ƒè™‘ã€‚</p><p>2ï¸âƒ£åŒæ­¥å—èŒƒå›´è®¾ç½®è¿‡å¤§ï¼Œå¯¼è‡´ç”µæ¢¯æ•ˆç‡å¤§å¹…åº¦ä¸‹é™è€Œè¶…æ—¶ã€‚</p><p>â€‹ åœ¨çŠ¶æ€æ¨¡å¼ä¸­ï¼Œåˆ‡æ¢çŠ¶æ€çš„è¯­å¥å¦‚ä¸‹ï¼šï¼ˆç”±æ­¤å¯ä»¥æ¨å‡ºç”µæ¢¯å†…æœ‰ä¸€ä¸ª <code>State</code> æ¥å£ï¼Œè€Œæ¥å£çš„å®ç°ç±»ä¸­åˆæŒæœ‰ä¸€éƒ¨ç”µæ¢¯ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">elevator.setState (<span class="keyword">new</span> StateOpen (elevator));</span><br><span class="line">elevator.getStatus ().behave ();</span><br><span class="line"><span class="keyword">return</span>;</span><br></pre></td></tr></table></figure><p>â€‹ è€Œæˆ‘ä¸€å¼€å§‹å°†è¿™ä¸‰è¡Œå†™åœ¨äº† <code>synchronized</code> å—å†…ï¼Œå¯¼è‡´è¿™éƒ¨ç”µæ¢¯åˆ‡æ¢çŠ¶æ€å¹¶ <code>behave ()</code> çš„æ—¶å€™è¿˜å¤„åœ¨ä¸Šä¸€ä¸ªçŠ¶æ€çš„é”ä¸­ï¼Œè¿™æ ·çŠ¶æ€åå¤åˆ‡æ¢ï¼Œé”ä¸€å±‚å±‚å åŠ ï¼Œè€Œæ¯ä¸ªçŠ¶æ€å…±äº«çš„å¯¹è±¡éƒ½ç›¸åŒï¼ˆå³ç”µæ¢¯çš„å¤–éƒ¨ç­‰å¾…é˜Ÿåˆ—ï¼‰ï¼Œå¯¼è‡´å…±äº«å¯¹è±¡è¢«åŠ äº†è‹¥å¹²å±‚é”ï¼Œè®¿é—®å’Œæ“ä½œçš„æ•ˆç‡æä½ã€‚è€Œå¼±æµ‹å’Œä¸­æµ‹çš„æ•°æ®å¼ºåº¦ä¸å¤Ÿï¼Œå¯¼è‡´æ²¡æœ‰è¶…æ—¶çš„æƒ…å†µå‘ç”Ÿã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">synchronized</span>(outsideQueue) &#123;</span><br><span class="line">        ...</span><br><span class="line">        elevator.setState (<span class="keyword">new</span> StateOpen (elevator));</span><br><span class="line">elevator.getStatus ().behave ();<span class="comment">// å³ä½¿åˆ‡æ¢äº†çŠ¶æ€ï¼Œä½†çŠ¶æ€ behave çš„æ—¶å€™ä¾ç„¶åœ¨è¿™å±‚é”å†… </span></span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>** è§£å†³æ–¹æ³• **ï¼šå¤§é¢ç§¯æ£€æŸ¥ <code>synchronized</code> å—çš„èŒƒå›´ï¼Œå°½å¯èƒ½å‡å°ä»£ç å—è§„æ¨¡ã€‚</p><h2 id="ç¬¬å…­æ¬¡ä½œä¸š">âœç¬¬å…­æ¬¡ä½œä¸š</h2><h3 id="ç¨‹åºæ¶æ„-1">ğŸ ç¨‹åºæ¶æ„</h3><p><strong>ï¼ˆç¬¬äºŒæ¬¡ä½œä¸šçš„æ—¶åºå›¾å’Œç¬¬ä¸€æ¬¡ä½œä¸šåŸºæœ¬ç›¸åŒï¼Œæ•…ä¸å†é‡å¤å±•ç¤ºï¼‰</strong></p><p><img src="/2022/05/26/BUAA-OO-U2-Review/U2A2.png"></p><p>â€‹ ç¬¬å…­æ¬¡ä½œä¸šç›¸æ¯”ç¬¬äº”æ¬¡ä½œä¸šä¸»è¦å¢åŠ äº†æ¨ªå‘ç”µæ¢¯å’Œè¯·æ±‚ï¼Œå¹¶ä¸”å¯ä»¥åŠ¨æ€å¢åŠ æ¨ªå‘å’Œçºµå‘çš„ç”µæ¢¯ã€‚ï¼ˆ<code>P</code> ä»£è¡¨ <code>parallel</code>ï¼Œ<code>V</code> ä»£è¡¨ <code>vertical</code>ï¼Œä¸‹åŒï¼‰</p><h4 id="é‡è¦ç±»æè¿°-è°ƒåº¦å™¨è®¾è®¡-1">ğŸ’¬é‡è¦ç±»æè¿° + è°ƒåº¦å™¨è®¾è®¡</h4><p>ï¼ˆä¸€äº›ç±»å’Œä¸Šä¸€æ¬¡ä½œä¸šåŸºæœ¬ç›¸åŒæˆ–æ”¹åŠ¨è¾ƒå°ï¼Œæ•…ä¸å†èµ˜è¿°ï¼‰</p><p>ğŸ¤ <strong><code>InputHandler &amp; RequestDispatcher</code></strong>ï¼š</p><p>â€‹ æœ¬æ¬¡ä½œä¸šä¸­ä¸€ä¸ªæ¥¼å±‚æˆ–ä¸€ä¸ªæ¥¼åº§å¯ä»¥æœ‰å¤šéƒ¨ç”µæ¢¯ï¼Œæˆ‘ç»™æ¯éƒ¨ç”µæ¢¯éƒ½åˆ†é…äº†ä¸€ä¸ªé˜Ÿåˆ—ï¼Œè¿™æ ·å®ƒå¯ä»¥æ ¹æ®è‡ªå·±é˜Ÿåˆ—çš„ä¿¡æ¯è®¡ç®—è¦å»å¾€çš„æ¥¼å±‚ï¼Œä¸å¿…è‡ªç”±ç«äº‰ï¼ˆè™½ç„¶å¬è¯´è‡ªç”±ç«äº‰çš„ç­–ç•¥æ•ˆæœè¿˜ä¸é”™ï¼‰ã€‚</p><p>â€‹ æ¯ä¸€éƒ¨ç”µæ¢¯éƒ½å¯¹äºæ¨ªå‘å’Œçºµå‘ç”µæ¢¯ï¼Œéƒ½ç»´æŠ¤äº†ä¸€ä¸ª <code>ConcurrentHashMap&lt;Integer,CopyOnWriteArrayList&lt;Integer&gt;&gt;</code> å’Œ <code>ConcurrentHashMap&lt;Integer, RequestQueue&gt;</code>ï¼Œå‰è€…è®°å½•äº† <code>floor /building ---&gt; SET &#123;id&#125;</code> çš„æ˜ å°„ï¼Œä½“ç°æ¯ä¸€å±‚æˆ–æ¯ä¸€æ ‹æ¥¼æœ‰å“ªäº›ç”µæ¢¯åœ¨å·¥ä½œï¼›åè€…è®°å½•äº† <code>id ---&gt; outsideQueue</code> çš„æ˜ å°„ã€‚è¿™æ · <code>InputHandler</code> åœ¨æ·»åŠ ç”µæ¢¯çš„æ—¶å€™å¯¹è¿™ä¸¤ä¸ªæ•°æ®ç»“æ„è¿›è¡Œæ·»åŠ æ“ä½œï¼Œ<code>RequestDispatcher</code> åˆ†é…è¯·æ±‚çš„æ—¶å€™æ ¹æ® <code>floor /building</code> æ‰¾åˆ° <code>SET &#123;id&#125;</code>ï¼Œå†æ ¹æ®ç”µæ¢¯æ­¤æ—¶çš„å‹åŠ› <code>insideQueue.size () + outsideQueue.size ()</code> æ’åºï¼Œå°†è¯·æ±‚åˆ†é…ç»™å‹åŠ›æœ€å°çš„ç”µæ¢¯ã€‚</p><p>â€‹ å…¶å®è¿™ç§æ’åºçš„æƒé‡åˆ†é…ä¸è§å¾—å®Œå…¨åˆç†ï¼Œå› ä¸ºå†…å¤–è¯·æ±‚å¯¹ç”µæ¢¯è¿è¡Œæ—¶é—´çš„å½±å“å¯èƒ½ä¸åŒï¼Œå¯ä»¥æ”¹æˆ <code>a * insideQueue.size () + b * outsideQueue.size ()</code> è¿™ç§å½¢å¼ï¼Œå¤šè·‘å‡ ä¸ªæµ‹è¯•ç‚¹çœ‹çœ‹å“ªä¸ªå‚æ•°å¯¹ <span class="math inline">\((a,b)\)</span> å¯ä»¥è®©æ—¶é—´æœ€å°ï¼ˆx</p><p>ğŸ¤ <strong><code>LiftV &amp; LiftP</code></strong>ï¼š</p><p>â€‹ æ¨ªå‘å’Œçºµå‘ç”µæ¢¯çš„åŸºæœ¬æ¶æ„æ˜¯ç±»ä¼¼çš„ï¼Œä»ç„¶ä½¿ç”¨çŠ¶æ€æ¨¡å¼ï¼Œåªæ˜¯æŠŠçŠ¶æ€ç±»å†™åœ¨äº†ç”µæ¢¯ç±»å†…éƒ¨ä»¥å¢åŠ ç”µæ¢¯ç±»å­—æ®µçš„å¯è§æ€§ã€‚</p><p>â€‹ çºµå‘ç”µæ¢¯çš„ç­–ç•¥ä»ç„¶æ²¿ç”¨ä¸Šä¸€æ¬¡ä½œä¸šçš„ look ç®—æ³•ã€‚æ•´ä½“æ”¹åŠ¨å¾ˆå°ï¼Œæ•…ä¸å†èµ˜è¿°ã€‚</p><p>â€‹ æ¨ªå‘ç”µæ¢¯çš„ç‰¹æ®Šä¹‹å¤„åœ¨äºå¯ä»¥å¾ªç¯è¿åŠ¨ï¼Œè¿™æ¬¡ä½œä¸šä¸­æˆ‘è§„å®šæ¨ªå‘ç”µæ¢¯åªèƒ½æŒ‰ç…§ä¸€ä¸ªæ–¹å‘å¾ªç¯ç§»åŠ¨ï¼Œåœ¨æ„é€ æ–¹æ³•å†…çš„å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Random random = <span class="keyword">new</span> Random ();</span><br><span class="line"><span class="keyword">this</span>.direction = random.nextInt (<span class="number">2</span>) == <span class="number">1</span> ? UP : DOWN;</span><br><span class="line"><span class="comment">// UP = &quot;A -&gt; B -&gt; C -&gt; ...&quot;, DOWN = &quot;A -&gt; E -&gt; D -&gt; ...&quot;</span></span><br></pre></td></tr></table></figure><p>â€‹ ç”±ä¸Šå¯çŸ¥ç”µæ¢¯è¯·æ±‚çš„åˆ†é…ä¸­æ²¡æœ‰è€ƒè™‘æ¨ªå‘ç”µæ¢¯çš„æ–¹å‘ï¼Œè¿™ç§æ–¹æ³•çœ‹ä¼¼æš´åŠ›ï¼Œä½†æ˜¯åœ¨å¼ºæµ‹çš„å¤§é‡éšæœºæ•°æ®æµ‹è¯•ä¸­è¡¨ç°è¿˜ä¸é”™ï¼Œå¾—åˆ°äº† 96 + åˆ†ã€‚</p><h2 id="ç¬¬ä¸ƒæ¬¡ä½œä¸š">âœç¬¬ä¸ƒæ¬¡ä½œä¸š</h2><h3 id="ç¨‹åºæ¶æ„-2">ğŸ ç¨‹åºæ¶æ„</h3><p><img src="/2022/05/26/BUAA-OO-U2-Review/U2A3.png"></p><p><img src="/2022/05/26/BUAA-OO-U2-Review/U2A3_seq.png" alt style="zoom:80%;"></p><p>â€‹ ç¬¬ä¸ƒæ¬¡ä½œä¸šåœ¨ç¬¬å…­æ¬¡ä½œä¸šçš„åŸºç¡€ä¸Šæ·»åŠ äº†éœ€è¦æ¢ä¹˜çš„è¯·æ±‚å’Œæ¨ªå‘ç”µæ¢¯çš„å¯è¾¾æ€§ï¼ˆå³ä¸ä¸€å®šå¯ä»¥åœ¨æ¯ä¸ªæ¥¼åº§å¼€é—¨ï¼‰ã€‚</p><h4 id="é‡è¦ç±»æè¿°-è°ƒåº¦å™¨è®¾è®¡-2">ğŸ’¬é‡è¦ç±»æè¿° + è°ƒåº¦å™¨è®¾è®¡</h4><p>ğŸ¤ <strong><code>MyPersonRequest</code></strong>ï¼š</p><p>â€‹ å¯ä»¥è¯´è¿™æ˜¯æœ¬æ¬¡ä½œä¸šæœ€é‡è¦çš„ä¸€ä¸ªç±»ï¼Œå®ƒåŒ…è£…äº†å®˜æ–¹åŒ…çš„ <code>Request</code> ç±»ï¼Œå«æœ‰ä¸‹è¿°å­—æ®µï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> PersonRequest request;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">boolean</span> vertical;<span class="comment">//æ˜¯å¦æ˜¯çºµå‘è¯·æ±‚ï¼ˆé»˜è®¤ä¸éœ€è¦æ¢ä¹˜ï¼‰</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">boolean</span> hasFirstShifted;<span class="comment">//æ˜¯å¦å®Œæˆæ¢ä¹˜ç¬¬ä¸€é˜¶æ®µ </span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">boolean</span> hasSecondShifted;<span class="comment">//æ˜¯å¦å®Œæˆæ¢ä¹˜ç¬¬äºŒé˜¶æ®µ </span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> shiftFloor;<span class="comment">//éœ€è¦æ¢ä¹˜çš„æ¥¼å±‚ </span></span><br></pre></td></tr></table></figure><p>â€‹ â€œåŒ…è£…â€ çš„å«ä¹‰å°±æ˜¯ï¼Œä¸€ä¸ª <code>MyPersonRequest</code> å¯¹è±¡åœ¨åˆ›å»ºä¹‹åˆå°±å­˜å‚¨äº†æ‰€æœ‰çš„ä¿¡æ¯ï¼šæ¢ä¹˜é˜¶æ®µã€æ¢ä¹˜æ¥¼å±‚å’Œ <code>PersonRequest</code> å¯¹è±¡çš„ç›¸å…³ä¿¡æ¯ã€‚ä½†æ˜¯å¯ä»¥æ ¹æ®ä¸‰ä¸ª <code>boolean</code> é€‰æ‹©å°†å“ªäº›ä¿¡æ¯æš´éœ²ç»™å¤–é¢ï¼Œè¿™æ ·å…¶ä»–ç±»ä¸éœ€è¦æ‹†åŒ…ï¼Œä¹Ÿä¾¿äºä¿®æ”¹è¯·æ±‚çš„çŠ¶æ€ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">char</span> <span class="title">getFromBuilding</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (!vertical &amp; hasSecondShifted) ? request.getToBuilding () : request.getFromBuilding ();&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">char</span> <span class="title">getToBuilding</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (!vertical &amp; hasFirstShifted) ? request.getToBuilding () : request.getFromBuilding ();&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getFromFloor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (!vertical &amp; hasFirstShifted) ? shiftFloor : request.getFromFloor ();&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getToFloor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (vertical || hasSecondShifted) ? request.getToFloor () : shiftFloor;&#125;</span><br></pre></td></tr></table></figure><p>â€‹ æœ¬æ¬¡ä½œä¸šå¯ä»¥è®©è¯·æ±‚è¿›è¡Œå¤šæ¬¡æ¢ä¹˜ï¼Œä½†æ˜¯è€ƒè™‘åˆ°ç”µæ¢¯è¿è¡Œå’Œå¼€å…³é—¨çš„æ—¶é—´æŸè€—ï¼Œæˆ‘åªå®ç°äº†ä¸€æ¬¡æ¢ä¹˜ã€‚ä¸€äº›åŠ¨æ€çš„è§„åˆ’ç®—æ³•å¯ä»¥å®ç°å¤šæ¬¡æ¢ä¹˜ï¼Œä½†æ˜¯ç”±äºéœ€è¦å¤šæ¬¡å¼€å…³é—¨ï¼Œå¯èƒ½ä¼šå¾—ä¸å¿å¤±ã€‚è¯·æ±‚çš„æ¢ä¹˜å¯ä»¥çœ‹ä½œä¸‰ä¸ªé˜¶æ®µï¼š<code>UP / DOWN -&gt; CHANGE BUILDING -&gt; UP / DOWN</code>ï¼Œå…¶ä¸­çš„ä¸¤ä¸ªç®­å¤´å°±æ ‡å¿—äº†ä¸¤ä¸ªé˜¶æ®µçš„ç»“æŸï¼Œ<code>UP / DOWN</code> åœ¨è¿™é‡Œå¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œå› ä¸ºæœ‰å¯èƒ½å‡ºç°åªéœ€è¦æ¨ªå‘ç§»åŠ¨å°±å¯ä»¥å®Œæˆæˆ–è€…åªéœ€è¦ä¸€æ¬¡çºµå‘ç§»åŠ¨çš„è¯·æ±‚ã€‚</p><p>â€‹ <code>shiftFloor</code> çš„è®¡ç®—æ˜¯è¯·æ±‚åˆ†é…è¿‡ç¨‹ä¸­æœ€é‡è¦çš„ä¸€æ­¥ï¼Œå•ä¸ªè¯·æ±‚åœ¨ä¸åŒæ¥¼å±‚æ¢ä¹˜çš„æ—¶é—´å·®åˆ«ä¸ä¼šå¤ªå¤§ï¼Œä½†æ˜¯å¦‚æœåœ¨å¼ºæµ‹çš„ç¯å¢ƒä¸‹ï¼Œå‡ åä¸ªè¯·æ±‚åŒæ—¶åˆ°æ¥ï¼Œå¦‚ä½•å¦¥å½“åœ°å®‰æ’å®ƒä»¬æ˜¯å¾ˆé‡è¦çš„äº‹æƒ…ã€‚èº«è¾¹æœ‰äº›åŒå­¦ä½¿ç”¨äº†å›¾ç®—æ³•ï¼Œè®¡ç®—å¦‚ä½•æ¢ä¹˜å¯ä»¥å®ç°æœ€çŸ­è·¯ï¼Œæˆ‘è®¤ä¸ºè¿™æ ·æœ‰äº›å¤æ‚ï½ï½ï¼ˆå…¶å®æ˜¯è‡ªå·±æ‡’ï¼‰~~ï¼Œåªæ˜¯å†™äº†ä¸€ä¸ªæ ¹æ®ç”µæ¢¯ç›¸å…³ä¿¡æ¯è®¡ç®—ä»£ä»·çš„å‡½æ•°ï¼Œç„¶åæ’åºæ‰¾ä»£ä»·æœ€å°çš„æ¥¼å±‚ <strong>ï¼ˆåˆ«å¿˜äº†å¯è¾¾æ€§ï¼‰</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">weight</span><span class="params">(LiftP lift, PersonRequest req)</span> </span>&#123;<span class="comment">// æ³¨æ„è¿™é‡Œçš„å‚æ•°ç±»å‹ä»ç„¶æ˜¯ PersonRequest</span></span><br><span class="line">    <span class="keyword">int</span> upper = Integer.max (req.getFromFloor (), req.getToFloor ());</span><br><span class="line">    <span class="keyword">int</span> lower = Integer.min (req.getFromFloor (), req.getToFloor ());</span><br><span class="line">    <span class="keyword">int</span> floor = lift.getFloor ();</span><br><span class="line">    <span class="keyword">int</span> speed = lift.getMoveDur ();</span><br><span class="line">    <span class="keyword">int</span> boundWeight = (upper &lt; floor || lower &gt; floor) ?</span><br><span class="line">            (upper &lt; floor) ? <span class="number">100</span> + <span class="number">10</span> * (floor - upper) :</span><br><span class="line">                    <span class="number">100</span> + <span class="number">10</span> * (lower - floor) : <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> speedWeight = speed / <span class="number">25</span>;</span><br><span class="line">    <span class="keyword">int</span> insidePressureWeight = lift.getInsideNum () * <span class="number">13</span>;</span><br><span class="line">    <span class="keyword">int</span> outsidePressureWeight = lift.getOutsideNum () * <span class="number">7</span>;</span><br><span class="line">    <span class="keyword">return</span> (boundWeight + speedWeight +</span><br><span class="line">            insidePressureWeight + outsidePressureWeight);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹ è¿™é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½æ˜¯åæ¥æå‡ºæ¥è§‰å¾—æ¯”è¾ƒåˆé€‚çš„ã€‚å…¶å®ä¹Ÿå¾ˆç„å­¦ï¼Œå¯èƒ½æ”¹äº†ä¹Ÿä¸ä¼šå‡ºä»€ä¹ˆé—®é¢˜ï¼Œè€Œä¸”ä¹Ÿæœ‰ä¸€å®šçš„è¿æ°”æˆåˆ†ï¼Œåæ¥è°ƒå‚è°ƒä¸ä¸‹å»æ„Ÿè§‰æ‰¾ä¸åˆ°æœ€ä¼˜çš„å‚æ•°ï¼ˆå½“ç„¶æ‰¾ä¸åˆ°ï¼‰ï¼Œå°±å¡«äº†ä¸ªæ„Ÿè§‰è¿˜å‡‘åˆçš„æäº¤äº†ï¼Œæ²¡æƒ³åˆ°å¼ºæµ‹ä¸­è¡¨ç°è¿˜ä¸é”™ã€‚</p><p>ğŸ¤ <strong><code>Counter</code></strong>ï¼š</p><p>â€‹ ä¸€ä¸ªå¾ˆè‡ªç„¶çš„æƒ³æ³•æ˜¯ï¼šéœ€è¦æ¢ä¹˜çš„è¯·æ±‚åœ¨æŸä¸ªé˜¶æ®µå®Œæˆä¹‹åï¼Œä¿®æ”¹å¯¹åº”çš„çŠ¶æ€å†è¿”å›ç»™è°ƒåº¦å™¨ä¸­çš„ç­‰å¾…é˜Ÿåˆ—è¿›è¡Œåˆ†å‘ã€‚ä½†æ˜¯ <code>RequestDispatcher</code> çº¿ç¨‹ç»“æŸçš„æ¡ä»¶æ˜¯ç­‰å¾…é˜Ÿåˆ— <code>inputQueue</code> ä¸ºç©ºä¸”å…¶ <code>reachEnd</code> æ ‡è®°è¢«è®¾ç½®ï¼Œè€Œåè€…æ˜¯ <code>InputHandler</code> çº¿ç¨‹è®¾ç½®çš„ï¼Œæ¡ä»¶ä¸º <code>request == null</code>ã€‚è¿™æ ·çš„ç»“æŸæ¡ä»¶æ˜¾ç„¶ä¸èƒ½æ»¡è¶³æ¢ä¹˜è¯·æ±‚ï¼Œå› ä¸ºæœ‰å¯èƒ½å‡ºç°ä»æ–‡ä»¶ä¸­è¾“å…¥çš„è¯·æ±‚è¢«è¯»å®Œä¸” <code>inputQueue</code> ä¸­çš„è¯·æ±‚éƒ½è¢«åˆ†é…ï¼Œä½†æ˜¯æ­£åœ¨è¿è¡Œçš„ç”µæ¢¯é‡Œæœ‰éœ€è¦æ¢ä¹˜çš„è¯·æ±‚ï¼Œè€Œæ­¤æ—¶è¾“å…¥å’Œè°ƒåº¦å™¨çº¿ç¨‹éƒ½æå‰ç»“æŸäº†ï¼Œè¿™å°±å¯¼è‡´ä¼šå‡ºç°è¯·æ±‚ä¸èƒ½å½»åº•å®Œæˆçš„æƒ…å†µã€‚</p><p>â€‹ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥å¢åŠ ä¸€ä¸ªè®¡æ•°å™¨æ¨¡å—ï¼Œå®ƒåœ¨ <code>InputHandler</code> è¯»å…¥æ–°è¯·æ±‚çš„æ—¶å€™è‡ªå¢ï¼Œåœ¨ç”µæ¢¯å½»åº•å®Œæˆä¸€ä¸ªè¯·æ±‚çš„æ—¶å€™è‡ªå‡ã€‚è¿™æ · <code>InputHandler</code> åœ¨è®¡æ•°å™¨ä¸º 0 ä¸”æ‰€æœ‰è¯·æ±‚å·²ç»è¢«è¯»å…¥çš„æƒ…å†µä¸‹æ‰å¯ä»¥åœæ­¢ã€‚å…¶å®ç°å¾ˆç®€å•ï¼Œåªéœ€è¦æ³¨æ„çº¿ç¨‹å®‰å…¨å³å¯ã€‚</p><h2 id="å‘ç°-bug-çš„ç­–ç•¥">âœ”å‘ç° bug çš„ç­–ç•¥</h2><h3 id="è‡ªå·±çš„-bug">ğŸ’¦è‡ªå·±çš„ bug</h3><p>â€‹ å…¶å®ä¹Ÿæ²¡æœ‰ä»€ä¹ˆæˆä½“ç³»çš„ç­–ç•¥ï¼Œä¸»è¦æ˜¯éšæœºæ•°æ®ç‚¹æµ‹è¯•å’Œè‡ªå·±æ‰‹å†™å°è§„æ¨¡çš„æµ‹è¯•ç‚¹æ¥æ£€éªŒç‰¹å®šæ¨¡å—çš„æ­£ç¡®æ€§ã€‚å¦å¤–å¤šçº¿ç¨‹çš„ç‰¹ç‚¹æ˜¯ bug ä¸ä¸€å®šèƒ½å¤ç°ï¼Œæ‰€ä»¥ä¸€ä¸ªæµ‹è¯•ç‚¹å¤šè·‘å‡ æ¬¡æ¯”è¾ƒå¥½ã€‚åæ¥å®¤å‹å†™äº†ä¸€ä¸ªå¯ä»¥æŠŠè¾“å‡ºæ ¹æ®ä¸åŒç”µæ¢¯æ¥æ‹†åˆ†çš„ç¨‹åºï¼Œè¿™ä½¿å¾— debug è¿‡ç¨‹æ•ˆç‡æé«˜äº†å¾ˆå¤šï¼šåŸæ¥åªèƒ½è‚‰çœ¼è§‚å¯Ÿå°è§„æ¨¡æ•°æ®ç‚¹çš„è¾“å‡ºï¼Œæœ€å¤šåªèƒ½çœ‹çœ‹æœ‰æ— æ­»å¾ªç¯å’Œå¼‚å¸¸ï¼Œæœ‰äº†è¾…åŠ©ç¨‹åºå°±å¯ä»¥ç»†è‡´æ£€æŸ¥æ¯éƒ¨ç”µæ¢¯æ˜¯å¦æ­£å¸¸è¿è¡Œï¼Œéå¸¸æ–¹ä¾¿ã€‚</p><h3 id="äº’æµ‹çš„-bug">ğŸ‘â€ğŸ—¨äº’æµ‹çš„ bug</h3><p>â€‹ ä¸å¾—ä¸è¯´è¿™å•å…ƒçš„äº’æµ‹æˆ‘æ²¡æœ‰ç¬¬ä¸€å•å…ƒç§¯æï¼Œä¸»è¦æ˜¯æ²¡æœ‰æ•°æ®ç”Ÿæˆå™¨ï¼Œæ‰‹å†™æ•°æ®ç‚¹ä¹Ÿå¾ˆç¹çã€‚æ‰€ä»¥äº’æµ‹ä¸­æˆ‘åªæ˜¯æäº¤äº†ä¸€äº›å°è§„æ¨¡çš„è¾¹ç•Œæ•°æ®æµ‹è¯•ç‚¹ï¼Œæ¯”å¦‚ç¬¬ä¸€ç§’è¾“å…¥ä¸€ä¸ªè¯·æ±‚ï¼Œç­‰ä¸€åˆ†é’Ÿå†åŠ ä¸€éƒ¨ç”µæ¢¯è¿™ç§ï¼ˆæœ‰çš„åŒå­¦çš„ç¨‹åºä¸ä¼šæ­£å¸¸ç»“æŸï¼‰ã€‚</p><h2 id="å¿ƒå¾—ä½“ä¼š">ğŸƒâ€â™€ï¸å¿ƒå¾—ä½“ä¼š</h2><p>â€‹ ç”µæ¢¯æœˆç»ˆäºç»“æŸäº†ï¼Œä¸è¿‡ä¸ªäººæ„Ÿè§‰è¿™å•å…ƒçš„å‹åŠ›å¹¶æ²¡æœ‰æ¯”ç¬¬ä¸€å•å…ƒå¤šå¾ˆå¤šï½ï½ï¼ˆé™¤äº†æœ‰æ¬¡å·®ç‚¹é€šå®µä»¥å¤–ï¼‰~~ã€‚ç¬¬ä¸€æ¬¡æ¥è§¦å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œå…¥é—¨å°±èŠ±äº†å¾ˆé•¿æ—¶é—´ï¼Œè¿˜å¥½ç¬¬ä¸€æ¬¡ä½œä¸šèµ¶ä¸Šå‡æœŸï¼Œè¯¾ç¨‹ç»„å»¶é•¿äº†å‡ å¤©ï¼Œå¦åˆ™æˆ‘æ˜¯ä¸€å®šå†™ä¸å®Œçš„ã€‚å› ä¸ºç¬¬ä¸€æ¬¡ä½œä¸šå»ºç«‹äº†ä¸€ä¸ªè¿˜ç®—åˆç†çš„æ¶æ„å’Œç”µæ¢¯è°ƒåº¦çš„ç®—æ³•ï¼ˆåé¢å°±æ²¡æœ‰åŠ¨è¿‡ï¼ŒLOLï¼‰ï¼Œæ‰€ä»¥åé¢ä¸¤æ¬¡ä½œä¸šå°±æ¯”è¾ƒé¡ºåˆ©ï¼Œçº¿ç¨‹ä¹‹é—´å¦‚ä½•æ²Ÿé€šã€åŒæ­¥ç­‰ç­‰éƒ½æ¯”è¾ƒç†Ÿç»ƒäº†ã€‚</p><p>â€‹ æœ¬å•å…ƒä½œä¸šä¸€ä¸ªæœ€å¤§çš„ä½“ä¼šå°±æ˜¯ï¼šå¤§é“è‡³ç®€ï¼ˆxï¼‰ã€‚åœ¨å¼€å§‹ç€æ‰‹è°ƒåº¦å’Œè¯·æ±‚åˆ†é…ç®—æ³•çš„ç¼–å†™å‰ï¼Œæˆ‘æƒ³äº†å¾ˆå¤šå®ç°çš„æ–¹æ³•ï¼Œèº«è¾¹çš„æœ‹å‹å’Œç ”è®¨è¯¾çš„åŒå­¦ä¹Ÿæå‡ºè¿‡å¾ˆå¤æ‚ä½†æ˜¯æ•ˆç‡å¾ˆé«˜çš„ç®—æ³•ï¼Œ~~ ä¸€æ–¹é¢æ˜¯å› ä¸ºè‡ªå·±æ¯”è¾ƒæ‡’ï¼Œ~~ å¦ä¸€æ–¹é¢æ˜¯è§‰å¾—åœ¨å¼ºæµ‹è¿™ç§å¤§è§„æ¨¡éšæœºæ•°æ®çš„æµ‹è¯•ä¸­ä¹Ÿè®¸ä¸ä¸€å®šè¶Šé«˜çº§è¶Šå¥½ï¼Œæ‰€ä»¥ç¬¬ä¸‰æ¬¡ä½œä¸šä¸­çš„è¯·æ±‚æ¢ä¹˜æ¥¼å±‚è®¡ç®—æˆ‘åªæ˜¯å†™äº†ä¸ªè®¡ç®—ä»£ä»·çš„å‡½æ•°ï¼Œè™½ç„¶çœ‹èµ·æ¥å¾ˆåŸå§‹ï¼Œä½†æ˜¯å¼ºæµ‹ä¸­æ²¡æœ‰ä½äº 92 åˆ†çš„ç‚¹ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯ 98 åˆ†ä¸Šä¸‹ã€‚æˆ‘çš„ä¸€ä¸ªå®¤å‹å†™äº†ä¸ªæ›´ç®€çŸ­çš„è®¡ç®—ä»£ä»·çš„å‡½æ•°ï¼ˆå¯èƒ½åªæœ‰å‡ è¡Œæˆ–è€…åå‡ è¡Œï¼‰ï¼Œæœ€åå¼ºæµ‹åˆ†æ•°æ¯”æˆ‘é«˜ã€‚å› æ­¤ç”µæ¢¯è°ƒåº¦è¿™ç§å¤§è§„æ¨¡ä¸”ä¸ç¡®å®šæ€§æ¯”è¾ƒå¼ºçš„åœºæ™¯ä¸­ä¸å­˜åœ¨æœ€ä½³çš„ç®—æ³•ï¼Œä½†æ˜¯å¯èƒ½å­˜åœ¨ä»£ç æ•ˆç‡æœ€é«˜çš„ç®—æ³•ï¼ˆæŒ‡å‡ è¡Œæ ¸å¿ƒçš„è°ƒåº¦ç®—æ³•å¾—åˆ°å¼ºæµ‹ 99+ğŸ¤—ï¼‰ã€‚</p>]]></content>
    
    
    <summary type="html">Concurrent Programming</summary>
    
    
    
    
    <category term="BUAA OO" scheme="http://alxzzhou.github.io/tags/BUAA-OO/"/>
    
  </entry>
  
  <entry>
    <title>BUAA OO U1 Review</title>
    <link href="http://alxzzhou.github.io/2022/03/22/BUAA-OO-U1-Review/"/>
    <id>http://alxzzhou.github.io/2022/03/22/BUAA-OO-U1-Review/</id>
    <published>2022-03-22T14:53:31.000Z</published>
    <updated>2022-10-21T14:32:00.368Z</updated>
    
    <content type="html"><![CDATA[<h1 id="buaa-oo-ç¬¬ä¸€å•å…ƒæ€»ç»“">BUAA OO ç¬¬ä¸€å•å…ƒæ€»ç»“</h1><h2 id="ç¬¬ä¸€æ¬¡ä½œä¸š">- ç¬¬ä¸€æ¬¡ä½œä¸š</h2><p>â€‹ ç¬¬ä¸€æ¬¡ä½œä¸šè¦æ±‚åŒ–ç®€ä¸€ä¸ªä¸€å…ƒï¼ˆå˜é‡åªèƒ½ä¸º <span class="math inline">\(x\)</span>ï¼‰çš„è¡¨è¾¾å¼ï¼Œå…¶ä¸­å¯ä»¥å‡ºç°ç©ºç™½ç¬¦å’Œè¿ç»­çš„æ­£è´Ÿå·ï¼Œè‡³å°‘éœ€è¦å»æ‰æ‰€æœ‰æ‹¬å·ã€‚ä¸ºäº†å¾—åˆ°æ€§èƒ½åˆ†ï¼Œè¿˜éœ€è¦è¿›è¡Œåˆå¹¶åŒç±»é¡¹çš„æ“ä½œã€‚</p><h3 id="ç¨‹åºæ¶æ„">ç¨‹åºæ¶æ„</h3><p><img src="/2022/03/22/BUAA-OO-U1-Review/image-20220303222022906.png"></p><p><em>ï¼ˆä¸€äº›ç±»çš„ get å’Œ set æ–¹æ³•æ²¡æœ‰æ˜ç¡®æ ‡å‡ºï¼‰</em></p><p>â€‹ ç¬¬ä¸€æ¬¡ä½œä¸šé‡‡ç”¨äº†é€’å½’ä¸‹é™çš„å¤„ç†æ–¹æ³•ï¼Œå„ä¸ªç±»çš„ä½œç”¨å¦‚ä¸‹ï¼š</p><ul><li><p><strong>Element</strong>ï¼šä½¿ç”¨ <code>HashMap&lt;Integer,BigInteger&gt;</code> å­˜å‚¨å„ä¸ªå…ƒç´ çš„ä¿¡æ¯ï¼Œå…¶ä¸­ Key è¡¨ç¤ºæ¬¡æ•°ï¼ŒValue è¡¨ç¤ºç³»æ•°ã€‚ç”±äºç¬¬ä¸€æ¬¡ä½œä¸šä¸åŒ…å«ä»»ä½•å…¶ä»–ç‰¹æ®Šå‡½æ•°ï¼Œæ‰€ä»¥æ— è®ºæ˜¯å› å­ã€é¡¹è¿˜æ˜¯è¡¨è¾¾å¼éƒ½å¯ä»¥ç”¨ Element æ¥å­˜å‚¨ï¼Œç»“æ„æ¯”è¾ƒç»Ÿä¸€ï¼Œæ–¹ä¾¿è¿ç®—å’ŒåŒ–ç®€ã€‚</p><p>ä¸ºæ–¹ä¾¿å™è¿°ï¼Œç»™å‡ºå› å­ã€é¡¹å’Œè¡¨è¾¾å¼çš„å®šä¹‰ï¼š</p><ul><li><b> å› å­ </b>ï¼šï¼ˆ+/-ï¼‰å˜é‡çš„å¹‚ + å¸¸æ•°çš„å¹‚ + æ‹¬å·è¡¨è¾¾å¼çš„å¹‚ï¼ˆå…¶ä¸­å¹‚æ¬¡ä¸º 1 å¯ä»¥çœç•¥å¹‚æŒ‡æ•°ï¼‰</li><li><b> é¡¹ </b>ï¼šå› å­çš„ä¹˜ç§¯</li><li><b> è¡¨è¾¾å¼ </b>ï¼šé¡¹çš„åŠ å’Œ</li></ul></li><li><p><strong>Token</strong>ï¼šå­˜å‚¨è¡¨è¾¾å¼åŸºæœ¬å•å…ƒçš„ç±»ï¼Œå¦‚æ“ä½œç¬¦ã€æ‹¬å·ã€æ“ä½œæ•°å’Œå˜é‡ã€‚</p></li><li><p><strong>Lexer</strong>ï¼šå¯¹è¾“å…¥è¡¨è¾¾å¼è¿›è¡Œè¯æ³•åˆ†æçš„ç±»ï¼Œå°†å­—ç¬¦ä¸²åˆ†å‰²ä¸ºè‹¥å¹² token å¹¶å­˜å…¥ <code>ArrayList&lt;Token&gt;</code>ï¼Œå¹¶ä¸”åœ¨è¯»å…¥è¿‡ç¨‹ä¸­è¿›è¡Œåˆæ­¥åŒ–ç®€ï¼š</p><ul><li>å°†è¿ç»­çš„ä¸€ä¸²åŠ å‡å·åˆ’å½’ä¸ºä¸€ä¸ªåŠ  / å‡å·ã€‚</li><li>å¯¹äºæ“ä½œæ•°ç›´æ¥ç”¨å­—ç¬¦ä¸²å­˜å‚¨ï¼Œåœ¨åç»­å¤„ç†è¿‡ç¨‹ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨è½¬æ¢ä¸ºæ•´æ•°ã€‚</li></ul></li><li><p><strong>Parser</strong>ï¼šé€’å½’ä¸‹é™é€ä¸ªè§£æ <code>ArrayList&lt;Tokens&gt;</code> çš„å…ƒç´ ã€‚<code>glbPos</code> è¡¨ç¤º token çš„ä½ç½®ï¼Œ<code>isHigh () isMid () isLow ()</code> æ–¹æ³•åˆ¤æ–­æ­¤æ—¶çš„ token æ˜¯å¦ä»£è¡¨è¿ç®—ç¬¦å¹¶åˆ¤æ–­ä¼˜å…ˆçº§ã€‚é€’å½’ä¸‹é™çš„å…¥å£æ˜¯ <code>parseExpr ()</code>ï¼Œä¹‹åè¿›å…¥ <code>parseTerm ()</code> å’Œ <code>parseUnit ()</code>ï¼Œå†ä» <code>parseUnit ()</code> è°ƒç”¨ <code>parseExpr ()</code> å®ç°é€’å½’ä¸‹é™ã€‚ç”±äºç»“æ„ç»Ÿä¸€ï¼Œå› æ­¤æ¯ä¸ª parse æ–¹æ³•çš„è¿”å›ç±»å‹éƒ½æ˜¯ Elementã€‚</p></li></ul><h3 id="åŸºäºåº¦é‡çš„ç»“æ„åˆ†æ">åŸºäºåº¦é‡çš„ç»“æ„åˆ†æ</h3><p><img src="/2022/03/22/BUAA-OO-U1-Review/image-20220322123607798.png"></p><p>â€‹ æ ¹æ® CogC æŒ‡æ ‡æ’åºï¼Œå¯ä»¥å‘ç°è®¤çŸ¥å¤æ‚åº¦è¾ƒé«˜çš„æ–¹æ³•ä¸º <code>parseUnit ()</code> å’Œ <code>output ()</code>ã€‚</p><p>â€‹ <code>parseUnit ()</code> æ–¹æ³•å¤æ‚åº¦è¾ƒé«˜çš„åŸå› æ˜¯å› å­çš„å®šä¹‰æ¯”è¾ƒå¤šï¼Œéœ€è¦åˆ¤æ–­ç±»å‹å’Œæ˜¯å¦æœ‰ä¹˜æ–¹ï¼Œå¯¼è‡´å…¶ä¸­å‡ºç°å¾ˆå¤šåˆ¤æ–­åˆ†æ”¯ï¼›<code>output ()</code> çš„åŸå› ç±»ä¼¼ï¼Œä¹Ÿæ˜¯å‡ºç°äº†å¾ˆå¤šåˆ†æ”¯æ¥åˆ¤æ–­å¦‚ä½•è¾“å‡ºå­—ç¬¦ä¸²ã€‚</p><h3 id="bug-åˆ†æ">bug åˆ†æ</h3><p>â€‹ æœ¬æ¬¡ä½œä¸šçš„ bug å‡ºç°åœ¨å½¢å¼åŒ–å®šä¹‰ä¸Šã€‚ä¸€å¼€å§‹æˆ‘æŠŠå› å­å®šä¹‰ä¸ºå˜é‡çš„å¹‚ + å¸¸æ•° + è¡¨è¾¾å¼çš„å¹‚ï¼Œå¯ä»¥æ³¨æ„åˆ°è¿™é‡Œç¼ºå°‘äº†å¸¸æ•°çš„å¹‚ï¼Œäºæ˜¯è¾“å…¥ <code>x*2**2</code> è·å¾—çš„ç»“æœå°±ä¸º <code>4*x**2</code>ï¼Œå› ä¸ºç¨‹åºæŠŠ <code>x*2</code>parse æˆäº†ä¸€ä¸ªæ•´ä½“ï¼Œäºæ˜¯åœ¨å¼ºæµ‹ä¸­å‡ºç°äº† bugã€‚åœ¨ <code>parseUnit ()</code> æ–¹æ³•ä¸­æ·»åŠ ä¸€ä¸ªåˆ¤æ–­å³å¯è§£å†³ã€‚</p><h2 id="ç¬¬äºŒæ¬¡ä½œä¸š">- ç¬¬äºŒæ¬¡ä½œä¸š</h2><p>â€‹ ç¬¬äºŒæ¬¡ä½œä¸šåœ¨ç¬¬ä¸€æ¬¡ä½œä¸šçš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸‰è§’å‡½æ•°ï¼ˆæ‹¬å·å†…åªèƒ½æ˜¯éè´Ÿæ•´æ•°å’Œ <span class="math inline">\(x\)</span> çš„éè´Ÿæ•´æ•°å¹‚ï¼‰ã€è‡ªå®šä¹‰å‡½æ•°å’Œæ±‚å’Œå‡½æ•°ï¼Œä¾ç„¶è¦æ±‚å»é™¤ä¸å¿…è¦çš„æ‹¬å·å¹¶å±•å¼€æ‰€æœ‰è‡ªå®šä¹‰å‡½æ•°å’Œæ±‚å’Œå‡½æ•°ã€‚æœ¬æ¬¡ä½œä¸šçš„å‡½æ•°ä¸èƒ½åµŒå¥—ã€‚</p><h3 id="ç¨‹åºæ¶æ„-1">ç¨‹åºæ¶æ„</h3><p><img src="/2022/03/22/BUAA-OO-U1-Review/image-20220322162937182.png"></p><p><em>ï¼ˆä¸€äº›ç±»çš„ get å’Œ set æ–¹æ³•æ²¡æœ‰æ˜ç¡®æ ‡å‡ºï¼‰</em></p><p>â€‹ ç¬¬äºŒæ¬¡ä½œä¸šä»ç„¶ä¿æŒäº†é€’å½’ä¸‹é™çš„å¤„ç†æ€è·¯ï¼Œå› ä¸ºæ‰¾åˆ°äº†å¯ä»¥ç»Ÿä¸€å­˜å‚¨è¡¨è¾¾å¼å„ä¸ªéƒ¨åˆ†çš„æ•°æ®ç»“æ„ï¼Œæ„Ÿè§‰å¹¶æ²¡æœ‰é‡æ„çš„å¿…è¦ã€‚<del>ï¼ˆå…¶å®æ˜¯å·æ‡’ï¼‰</del></p><ul><li><p><strong>Poly</strong>ï¼šè¿™é‡Œæˆ‘å°†é¡¹å®šä¹‰ä¸ºï¼š <span class="math display">\[\begin {align} a*({x^{b} }*\prod_{i=0}^{\infty}\ {sin^{s_i}(S_i)}*\prod_{j=0}^{\infty}\ {cos^{c_i}(C_j))} \end {align}  \]</span> è€Œ Poly åˆ™å­˜å‚¨äº†æœ€å¤–å±‚æ‹¬å·é‡Œé¢çš„å†…å®¹ï¼Œ<span class="math inline">\(b\)</span> å¯¹åº” <code>exp</code>ï¼Œ<code>sinSet</code> å’Œ <code>cosSet</code> åˆ†åˆ«å¯¹åº”ä¸¤ä¸ªç´¯ä¹˜ã€‚<code>HashMap&lt;String,BigInteger&gt;</code> ä¸­çš„ <code>String</code> è®°å½•çš„æ˜¯ <span class="math inline">\(S_i\)</span>ï¼Œå› ä¸ºæœ¬æ¬¡ä½œä¸šä¸‰è§’å‡½æ•°ä¸­åªèƒ½æ˜¯ <span class="math inline">\(x^p\ (p\ge0)\)</span> æˆ–è€… <span class="math inline">\(t\ (t\ge0,t\in \mathbb {Z})\)</span>ï¼Œå› æ­¤æ ¼å¼æ˜¯å®Œå…¨ç¡®å®šä¸”å”¯ä¸€çš„ï¼Œå¯ä»¥ç”¨å­—ç¬¦ä¸²å­˜å‚¨ã€‚è€Œä¸”å› å­å’Œé¡¹éƒ½å¯ä»¥ç”¨è¿™ç§å½¢å¼å¤„ç†ï¼Œè¿™ä½¿å¾—è®¡ç®—æ–¹é¢æ›´åŠ ç®€ä¾¿ã€‚</p></li><li><p><strong>Element</strong>ï¼š<code>HashMap&lt;Poly,BigInteger&gt;</code> è¡¨ç¤ºäº† <code>Poly</code> å’Œç³»æ•° <span class="math inline">\(a\)</span> çš„å¯¹åº”å…³ç³»é›†åˆï¼Œå³è®¸å¤šé¡¹çš„å’Œã€‚</p><p>å…¶ä¸­åŒ…å«äº†ä¸¤ä¸ªåŒ–ç®€çš„æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ç‰¹æ®Šå¤„ç† <span class="math inline">\(sin (0)/cos (0)\)</span> å’Œå¤„ç†ä¸‰è§’å‡½æ•°å¹³æ–¹å’Œã€‚</p></li><li><p><strong>PreProcessing</strong>ï¼šè¿™ä¸ªç±»ç”¨æ¥å¤„ç†è‡ªå®šä¹‰å‡½æ•°å’Œæ±‚å’Œå‡½æ•°ï¼Œå¹¶ä¸”æŠŠç¬¬ä¸€æ¬¡ä½œä¸šä¸­å‡ºç°çš„ä¸€äº›åŒ–ç®€æ­¥éª¤æ•´åˆäº†è¿›æ¥ã€‚ä¸‹é¢ç®€è¦è¯´æ˜å¦‚ä½•å¤„ç†ä¸¤ç§å‡½æ•°ã€‚</p><ul><li><p><b> è‡ªå®šä¹‰å‡½æ•° </b>ï¼š</p><ul><li>è¯»å…¥è‡ªå®šä¹‰å‡½æ•°çš„å®šä¹‰ï¼Œæ ¹æ®ç­‰å·åˆ’åˆ†ä¸ºå·¦å³ä¸¤éƒ¨åˆ†ï¼Œåˆ†åˆ«ä¸º <code>defL</code> å’Œ <code>defR</code>ï¼Œä½¿ç”¨æ­£åˆ™åŒ¹é…çš„æ•è·ç»„æ¥æ•è· <code>defL</code> çš„å‡½æ•°åä»¥åŠå˜é‡ï¼ˆæŒ‰é¡ºåºï¼‰ã€‚æ³¨æ„åœ¨æ­¤ä¹‹å‰éœ€è¦å¾—åˆ°æ­¤å‡½æ•°å˜é‡çš„æ•°é‡ï¼Œç„¶åä½¿ç”¨ç‰¹å®šçš„ Pattern æ¥åŒ¹é…ï¼ˆæˆ‘å®šä¹‰äº†ä¸€ä¸ª Pattern æ•°ç»„ï¼Œç”¨æ¥å­˜æ”¾ä¸åŒå˜é‡æ•°é‡çš„ <code>defL</code> æ­£åˆ™è¡¨è¾¾å¼ï¼‰ã€‚</li><li>å½“åœ¨è¾“å…¥ä¸­æ‰¾åˆ°è‡ªå®šä¹‰å‡½æ•°ï¼ˆè®°ä¸º <code>input</code>ï¼‰çš„æ—¶å€™è¿›è¡Œç¬¬äºŒæ¬¡æ­£åˆ™åŒ¹é… &amp; æ•è·ï¼ˆæ³¨æ„è¦æ‰¾å¯¹å‡½æ•°åï¼‰ï¼ŒæŒ‰é¡ºåºè·å¾—éœ€è¦ä»£å…¥çš„è¡¨è¾¾å¼ï¼Œè¿™æ · <code>input</code> å’Œ <code>defL</code> ä¸­å‚å˜é‡å’Œå®é™…è¡¨è¾¾å¼å°±ä»¥æ•è·ç»„çš„åºå·è¿›è¡Œäº†ä¸€ä¸€å¯¹åº”ï¼Œæ–¹ä¾¿å¤„ç†å¦‚ <span class="math inline">\(f (y,x)=y-x\)</span> ç­‰å‚å˜é‡ä¸æŒ‰é¡ºåºå‡ºç°çš„è‡ªå®šä¹‰å‡½æ•°ã€‚</li><li>è¯»å– <code>defR</code>ï¼Œå°†å‚å˜é‡æ›¿æ¢ä¸ºå¯¹åº”éœ€è¦ä»£å…¥çš„è¡¨è¾¾å¼å³å¯ï¼ˆè®°å¾—åœ¨æ¯ä¸ªä»£å…¥çš„è¡¨è¾¾å¼å¤–å¥—ä¸€å±‚æ‹¬å·æ¥è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œé˜²æ­¢æ›¿æ¢å›å»ä¹‹åäº§ç”Ÿé”™è¯¯ï¼‰ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯å¦‚æœå…ˆè¿›è¡Œäº† <span class="math inline">\(y\)</span> æˆ–è€… <span class="math inline">\(z\)</span> çš„æ›¿æ¢è€Œå‚å˜é‡ä¸­æœ‰ <span class="math inline">\(x\)</span>ï¼Œé‚£ä¹ˆåœ¨å°† <span class="math inline">\(y\)</span> æ›¿æ¢ä¸ºå« <span class="math inline">\(x\)</span> çš„è¡¨è¾¾å¼ä¹‹åå¯èƒ½ä¼šé‡å¤æ›¿æ¢ <span class="math inline">\(x\)</span>ï¼ˆæ¯”å¦‚ <span class="math inline">\(f (y,x)=y-x\)</span>ï¼Œ<code>input</code> ä¸º <span class="math inline">\(f (x,x+1)\)</span>ï¼Œé‚£ä¹ˆæ›¿æ¢è¿‡ç¨‹å°±æ˜¯ <span class="math inline">\(y-x\rightarrow x-x\rightarrow (x+1)-(x+1)\rightarrow 0\)</span>ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸æ­£ç¡®çš„ï¼‰ã€‚è¿™é‡Œæˆ‘çš„è§£å†³æ–¹æ³•æ˜¯ï¼šåœ¨æ›¿æ¢çš„æ—¶å€™éƒ½æŠŠ <span class="math inline">\(x\)</span> æ›¿æ¢ä¸ºä¸ç›¸å…³çš„å­—ç¬¦ <span class="math inline">\(w\)</span>ï¼Œæœ€åå†ç»Ÿä¸€ <code>replaceAll ("w","x")</code> å³å¯ã€‚</li></ul><p>åœ¨å¤„ç†è‡ªå®šä¹‰å‡½æ•°çš„æ—¶å€™ï¼ŒåŠ©æ•™ä¸€å†å¼ºè°ƒä¸è¦æš´åŠ›å­—ç¬¦ä¸²æ›¿æ¢ï¼Œè€Œæ˜¯ <b> å…ˆå¯¹è¡¨è¾¾å¼è¿›è¡Œå»ºæ¨¡ï¼Œå†ä»£å…¥åŸå¼ </b> ï¼Œå¥ˆä½•æˆ‘æ²¡æœ‰æƒ³åˆ°å¾ˆå¥½çš„å»ºæ¨¡æ–¹æ³•ï¼Œäºæ˜¯åªæ˜¯ä½¿ç”¨äº†æš´åŠ›æ›¿æ¢ã€‚ä¸è¿‡å¦‚æœç”¨è¡¨è¾¾å¼æ ‘å¤„ç†çš„è¯å»ºæ¨¡ä¼šæ–¹ä¾¿å¾ˆå¤šï¼Œå¯ä»¥å…ˆå¯¹å„ä¸ªè¡¨è¾¾å¼å»ºä¸€æ£µæ ‘ï¼Œä»£å…¥çš„æ—¶å€™æ›¿æ¢æ‰ä¸Šé¢çš„èŠ‚ç‚¹å†æ’å…¥åŸæ¥çš„è¡¨è¾¾å¼æ ‘å³å¯ã€‚</p></li><li><p><b> æ±‚å’Œå‡½æ•° </b>ï¼šä¹Ÿæ˜¯ä½¿ç”¨äº†å­—ç¬¦ä¸²æ›¿æ¢çš„æ–¹æ³•ï¼Œé€šè¿‡å¾ªç¯ + StringBuilder æ„å»ºéœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸²ã€‚è¿™é‡Œæœ‰ä¸‰ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼š</p><ul><li><span class="math inline">\(sin\)</span> ä¸­ä¹ŸåŒ…å«å­—æ¯ iï¼Œæ›¿æ¢çš„æ—¶å€™è¦å°å¿ƒã€‚å¯ä»¥å…ˆæŠŠä¸‰è§’å‡½æ•°åæå‰æ¢ä¸º s&amp;c æ¥è§£å†³ã€‚</li><li>å¦‚æœæ±‚å’Œä¸Šé™å°äºä¸‹é™ï¼Œåˆ™æœ¬é¡¹åº”ä¸º 0ã€‚</li><li>æ±‚å’Œä¸Šä¸‹é™æœ€å¥½å®šä¹‰ä¸º <code>BigInteger</code> ç±»å‹é˜²æ­¢æº¢å‡ºã€‚</li></ul></li></ul></li><li><p><strong>Lexer&amp;Parser&amp;Token</strong>ï¼šå’Œç¬¬ä¸€æ¬¡ä½œä¸šåŸºæœ¬ç›¸åŒã€‚</p></li></ul><h3 id="åŸºäºåº¦é‡çš„ç»“æ„åˆ†æ-1">åŸºäºåº¦é‡çš„ç»“æ„åˆ†æ</h3><p><img src="/2022/03/22/BUAA-OO-U1-Review/image-20220322174205046.png"></p><p>â€‹ æ ¹æ® CogC æŒ‡æ ‡æ’åºå‘ç°ï¼Œè®¤çŸ¥å¤æ‚åº¦è¾ƒé«˜çš„æ–¹æ³•å‰ä¸¤ä½ä»ç„¶æ˜¯ <code>parseUnit ()</code> å’Œ <code>output ()</code>ï¼Œè¿™æ˜¯æ›´å¤æ‚çš„å› å­å®šä¹‰å’Œæ›´å¤æ‚çš„è¾“å‡ºé€»è¾‘é€ æˆçš„ã€‚æ­¤å¤–ä¸€äº›åŒ–ç®€æ–¹æ³•çš„å¤æ‚åº¦ä¹Ÿè¾ƒé«˜ã€‚</p><h3 id="bug-åˆ†æ-1">bug åˆ†æ</h3><p>â€‹ æœ¬æ¬¡ä½œä¸šåœ¨å¼ºæµ‹å’Œäº’æµ‹ä¸­éƒ½æ²¡æœ‰å‡ºç° bugï¼Œä¸è¿‡å¼ºæµ‹ä¸­ä¸€äº›ç‚¹çš„æ€§èƒ½åˆ†ä¸é«˜ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ç”¨åŸå§‹çš„å­—ç¬¦ä¸²æ¥å­˜å‚¨ä¸‰è§’å‡½æ•°çš„å†…å®¹ï¼Œå¤„ç† <span class="math inline">\(sin (0)/cos (0)\)</span> çš„åŒ–ç®€æ—¶åªè€ƒè™‘åˆ°å­—ç¬¦ä¸²å†…å®¹ä¸º â€œ0â€ è€Œå¿½è§†äº† <span class="math inline">\(sin (-0)\)</span>ã€<span class="math inline">\(cos (+0)\)</span> ç­‰ï¼Œé€ æˆæ²¡æœ‰åŒ–ç®€å®Œå…¨çš„æƒ…å†µã€‚</p><h2 id="ç¬¬ä¸‰æ¬¡ä½œä¸š">- ç¬¬ä¸‰æ¬¡ä½œä¸š</h2><p>â€‹ ç¬¬ä¸‰æ¬¡ä½œä¸šåœ¨ç¬¬äºŒæ¬¡ä½œä¸šçš„åŸºç¡€ä¸Šå…è®¸äº†è‡ªå®šä¹‰å‡½æ•°çš„åµŒå¥—ï¼ˆæ±‚å’Œå‡½æ•°å†…ä¸å…è®¸å‡ºç°è‡ªå®šä¹‰å‡½æ•°ï¼‰ï¼ŒåŒæ—¶ä¸‰è§’å‡½æ•°å†…å¯ä»¥ä¸ºè¡¨è¾¾å¼ã€‚</p><h3 id="ç¨‹åºæ¶æ„-2">ç¨‹åºæ¶æ„</h3><p><img src="/2022/03/22/BUAA-OO-U1-Review/image-20220322175955155.png"></p><p><em>ï¼ˆä¸€äº›ç±»çš„ get å’Œ set æ–¹æ³•æ²¡æœ‰æ˜ç¡®æ ‡å‡ºï¼‰</em></p><p>â€‹ ç¬¬ä¸‰æ¬¡ä½œä¸šåœ¨ç¬¬äºŒæ¬¡ä½œä¸šçš„åŸºç¡€ä¸Šåªéœ€è¦æ”¹åŠ¨å¾ˆå°‘å°±å¯ä»¥ï¼Œæ‰€ä»¥ä¿æŒäº†åŸæ¥çš„æ¶æ„ã€‚å…¶ä¸­æœ€æ ¸å¿ƒçš„æ”¹åŠ¨æ˜¯å°† Poly ä¸­å­˜å‚¨ä¸‰è§’å‡½æ•°çš„ç»“æ„æ”¹ä¸º <code>HashMap&lt;Element,BigInteger&gt;</code>ï¼Œå¹¶ï½ï¼ˆå·®ä¸å¤šï¼‰~ é‡å†™äº† Poly å’Œ Element çš„ <code>equals ()</code> æ–¹æ³•ã€‚</p><p>â€‹ ä½†æ˜¯å¦‚æœæƒ³è¦åŒ–ç®€ç»“æœï¼Œåˆ™éœ€è¦è€—è´¹å¾ˆå¤šæ—¶é—´æ¥å®Œå–„ä»£ç å’Œæµ‹è¯•ã€‚æˆ‘èŠ±äº†å¤§æ¦‚ä¸¤å¤©æ—¶é—´æ‰åŸºæœ¬å®Œæˆå¤§æ¦‚åŒ–ç®€æ–¹æ³•ï¼Œå…¶ä¸­æœ‰æ— æ•°æ¬¡æµ‹è¯• <span class="math inline">\(\rightarrow\)</span> å‘ç° bug<span class="math inline">\(\rightarrow\)</span> ä¿®æ”¹ä»£ç  <span class="math inline">\(\rightarrow\)</span> æµ‹è¯•çš„å¾ªç¯ğŸ˜­ã€‚æœ€æ ¸å¿ƒçš„æ˜¯ä¸‰è§’å‡½æ•°å¹³æ–¹å’Œçš„åŒ–ç®€ï¼Œå¤§è‡´çš„é€»è¾‘ä¸ºï¼š</p><ul><li>éå† Element çš„ <code>HashMap</code>ï¼Œçœ‹æ˜¯å¦åŒæ—¶æœ‰ä¸¤ä¸ªä¸åŒçš„é¡¹ï¼Œå…¶ä¸­ä¸€ä¸ª <span class="math inline">\(sin\)</span> çš„æ¬¡æ•°å¤§äºç­‰äº 2ï¼Œå¦ä¸€ä¸ª <span class="math inline">\(cos\)</span> çš„æ¬¡æ•°å¤§äºç­‰äº 2ï¼Œå¹¶ä¸”å…¶ä¸­åŒ…å«çš„å†…å®¹ç›¸åŒï¼ˆ<b> è¿™é‡Œéœ€è¦é‡å†™ <code>equals ()</code> æ–¹æ³• </b>ï¼Œæˆ‘è‡ªå·±å¦å¤–å†™äº†ä¸€ä¸ª <code>equal ()</code> æ¥æ›¿ä»£ï¼Œè¿™æ˜¯ä¸æ˜æ™ºçš„åšæ³•ï¼‰ã€‚å…¶ä¸­å†…å®¹ç›¸åŒçš„ç¬¬ä¸€è¦ç´ æ˜¯ä¸‰è§’å‡½æ•°ä¸­ Element çš„ <code>HashMap</code> çš„å¤§å°ç›¸åŒï¼Œæ‰€ä»¥éœ€è¦åœ¨æ¯æ¬¡è¿ç®—ä¹‹åè¿›è¡Œä¸€æ¬¡åŒç±»é¡¹åˆå¹¶ã€‚</li><li>åˆ¤æ–­è¿™ä¸¤é¡¹åœ¨åˆ†åˆ«å°†ç¬¬ä¸€æ­¥æ‰¾å‡ºæ¥çš„ <span class="math inline">\(sin\)</span> å’Œ <span class="math inline">\(cos\)</span> æ¬¡æ•°å‡å» 2 ä¹‹åï¼Œå‰©ä¸‹çš„éƒ¨åˆ†æ˜¯å¦ç›¸åŒï¼Œå¦‚æœç›¸åŒï¼Œåˆ™æŠŠ <span class="math inline">\(cos\)</span> é‚£é¡¹çš„ç³»æ•°å‡è¿‡å»ï¼Œè€Œå®ƒè‡ªå·±ä¸¢æ‰ä¸€ä¸ª <span class="math inline">\(cos^2\)</span>ã€‚æ¯”å¦‚ <span class="math display">\[x*sin^3 (x+1)+2*cos^2 (x+1)*x*sin (x+1)\]</span> åŒ–ç®€ä¸º <span class="math display">\[-x*sin^3 (x+1)+x*sin (x+1)\]</span> ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä½œäº† <span class="math inline">\(cos^2 P=1-sin^2 P\)</span> çš„æ›¿æ¢ï¼Œè™½ç„¶ä¸æ˜¯æ¯ä¸ªè¡¨è¾¾å¼éƒ½èƒ½å®Œå…¨åŒ–ç®€ï¼Œä¸è¿‡åœ¨ç›¸å½“ä¸€éƒ¨åˆ†æµ‹è¯•æ ·ä¾‹ä¸­éƒ½æ˜¯å¥æ•ˆçš„ã€‚</li></ul><p>â€‹ <b> è¿™é‡Œä¸€ä¸ªé‡è¦çš„ç‚¹æ˜¯æ·±æ‹·è´ / æµ…æ‹·è´çš„åŒºåˆ«ï¼Œæ¯”å¦‚ç¬¬äºŒæ­¥å»æ‰ <span class="math inline">\(cos^2\)</span> åªéœ€æµ…æ‹·è´ï¼Œç›´æ¥ä¿®æ”¹ <code>this</code> çš„ Poly å°±å¯ä»¥ï¼Œä½†æ˜¯ç¬¬ä¸€æ­¥ä¸­åˆ¤æ–­â€ åŒ…å«çš„å†…å®¹ç›¸åŒ â€œæ—¶ï¼Œä¸èƒ½çœŸçš„åˆ†åˆ«å»æ‰ <span class="math inline">\(sin^2\)</span> å’Œ <span class="math inline">\(cos^2\)</span>ï¼Œè€Œæ˜¯éœ€è¦å¤åˆ¶ä¸€ä»½ç‹¬ç«‹çš„å‰¯æœ¬ï¼ˆä¸æ˜¯å¼•ç”¨åŒä¸€ä¸ªåœ°å€çš„æ•°æ®ï¼Œè€Œæ˜¯ä¸¤å—ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼Œå…¶ä¸­çš„å†…å®¹ç›¸åŒï¼‰ï¼Œä¸ºæ­¤å¯ä»¥ç›´æ¥å†™ä¸€ä¸ª <code>copy ()</code> æ–¹æ³•æ¥å¤åˆ¶ï¼Œä¹Ÿå¯ä»¥ç”¨åºåˆ—åŒ–æ–¹æ³•æ¥å®ç°æ·±æ‹·è´ï¼ˆå…·ä½“å®ç°åŸç†å¯ä»¥ä¸Šç½‘æœç´¢ï¼‰ã€‚</b></p><p>é™„åºåˆ—åŒ–å®ç°æ·±æ‹·è´çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SerialCloneable</span> <span class="keyword">implements</span> <span class="title">Cloneable</span>,<span class="title">Serializable</span>  </span></span><br><span class="line"><span class="class"></span>&#123;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">clone</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function">    </span>&#123;  </span><br><span class="line">        <span class="keyword">try</span>  </span><br><span class="line">        &#123;  </span><br><span class="line">            <span class="comment">//save the object to a byte array  </span></span><br><span class="line">            ByteArrayOutputStream bout = <span class="keyword">new</span> ByteArrayOutputStream ();  </span><br><span class="line">            ObjectOutputStream out = <span class="keyword">new</span> ObjectOutputStream (bout);  </span><br><span class="line">            out.writeObject (<span class="keyword">this</span>);  </span><br><span class="line">            out.close ();  </span><br><span class="line"></span><br><span class="line">            <span class="comment">//read a clone of the object from the byte array  </span></span><br><span class="line">            ByteArrayInputStream bin = <span class="keyword">new</span> ByteArrayInputStream (bout.toByteArray ());  </span><br><span class="line">            ObjectInputStream in = <span class="keyword">new</span> ObjectInputStream (bin);  </span><br><span class="line">            Object result = in.readObject ();  </span><br><span class="line">            in.close ();  </span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> result;  </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(Exception e)  </span><br><span class="line">        &#123;  </span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;    </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åŸºäºåº¦é‡çš„ç»“æ„åˆ†æ-2">åŸºäºåº¦é‡çš„ç»“æ„åˆ†æ</h3><p><img src="/2022/03/22/BUAA-OO-U1-Review/image-20220322182027486.png"></p><p>â€‹ æ ¹æ®åˆ†ææ•°æ®å¯çŸ¥ï¼Œè®¤çŸ¥å¤æ‚åº¦è¾ƒé«˜çš„æ–¹æ³•ä¸»è¦æ˜¯åŒ–ç®€å’Œè¾“å‡ºã€‚æœ¬æ¬¡ä½œä¸šä¸­ <code>parseUnit ()</code> æ–¹æ³•è¢«æ‹†åˆ†äº†ï¼Œæ‰€ä»¥å¤æ‚åº¦æœ‰æ‰€é™ä½ã€‚</p><h3 id="bug-åˆ†æ-2">bug åˆ†æ</h3><p>â€‹ æœ¬æ¬¡ä½œä¸šå‡ºç°äº†ä¸€äº› bugï¼Œåˆ†æå¦‚ä¸‹ï¼š</p><ul><li>ç”±äºè‡ªå®šä¹‰å‡½æ•°å…è®¸åµŒå¥—ï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ•è·ç»„å¤„ç†è¾“å…¥çš„è¡¨è¾¾å¼ä¼šå‡ºç°é”™è¯¯ï¼š<ul><li><b> æ­£åˆ™è¡¨è¾¾å¼ä¸èƒ½è¿›è¡Œæ‹¬å·çš„åŒ¹é… </b>ï¼Œå¯èƒ½ä¼šåœ¨åµŒå¥—çš„å‡½æ•°ä¸­é—´è¿›è¡Œæˆªæ–­ï¼Œå¯¼è‡´ç¨‹åºç»“æœé”™è¯¯ç”šè‡³æŠ¥é”™ã€‚</li><li><b> è§£å†³æ–¹æ³• </b>ï¼šè‡ªè¡Œå®ç°è‡ªå®šä¹‰å‡½æ•°å†…éƒ¨è¡¨è¾¾å¼çš„æ‹¬å·åŒ¹é…ï¼Œç­‰ä»·äºè‡ªå·±é‡æ–°å†™äº†ä¸€ä¸ªâ€ æ›´åŠ æ™ºèƒ½ â€œçš„æ•è·ç»„ã€‚</li></ul></li><li>ä¸‰è§’å‡½æ•°è¾“å‡ºæ ¼å¼é”™è¯¯ï¼š<ul><li><b><code>output ()</code> è°ƒç”¨çš„ <code>needBracket ()</code> æ–¹æ³•é€»è¾‘æœ‰è¯¯ </b> ï¼Œä¸€äº›æƒ…å†µä¸‹ä¼šå°‘è¾“å‡ºä¸€å¯¹ä¸‰è§’å‡½æ•°å†…çš„æ‹¬å·ï¼Œæ¯”å¦‚åº”è¯¥è¾“å‡º <span class="math inline">\(sin ((5*cos (x)))\)</span> è€Œåªè¾“å‡ºäº† <span class="math inline">\(sin (5*cos (x))\)</span>ã€‚</li><li><b> è§£å†³æ–¹æ³• </b>ï¼šè°ƒæ•´ <code>needBracket ()</code> å†…éƒ¨çš„é€»è¾‘ã€‚</li></ul></li></ul><h2 id="hack-ç­–ç•¥">- hack ç­–ç•¥</h2><p>â€‹ ä¸‹è½½å…¶ä»–åŒå­¦çš„ä»£ç æ›´å¤šæ˜¯ä¸ºäº†å­¦ä¹ æ¶æ„ï¼ˆæ¯•ç«Ÿä¹Ÿæ²¡æœ‰è‡ªåŠ¨è¯„æµ‹æœº + æ²¡æœ‰å‘ç°ç»†ææœ«èŠ‚çš„ bugï¼‰ï¼Œå› æ­¤åœ¨ç¬¬ä¸€å•å…ƒçš„äº’æµ‹ä¸­æˆ‘å¹¶æ²¡æœ‰æŸ¥çœ‹å¾ˆå¤šåŒå­¦çš„ä»£ç ï¼Œæ›´å¤šè¿˜æ˜¯æäº¤è¾¹ç¼˜æ•°æ®å’Œæµ‹è¯•ä¸­å‡ºç° bug çš„æ•°æ®ã€‚</p><h2 id="æ¶æ„è®¾è®¡è¯„ä»·">- æ¶æ„è®¾è®¡è¯„ä»·</h2><p>â€‹ ä¸‰æ¬¡ä½œä¸šçš„æ¶æ„ç»™æˆ‘æœ€å¤§çš„å°è±¡å°±æ˜¯ï¼š<b> å±…ç„¶æ²¡æœ‰ä½¿ç”¨æ¥å£å’Œç»§æ‰¿ </b>ã€‚</p><p>â€‹ å…¶å®ç¬¬ä¸€å•å…ƒä½œä¸šå¹¶æ²¡æœ‰ç»™æˆ‘ä¸€ç§é€æ¸æ‘¸ç´¢æ¶æ„çš„æ„Ÿè§‰ï¼Œå› ä¸ºä»ç¬¬ä¸€æ¬¡ä½œä¸šä½¿ç”¨ <code>HashMap</code> å¤„ç†å„ç§å…ƒç´ ä¹‹åï¼Œç¬¬äºŒæ¬¡ä½œä¸šæˆ‘çš„ç¬¬ä¸€ä¸ªæ€è·¯å°±æ˜¯ï¼šå¦‚ä½•å¡«å…… <code>HashMap</code> æ¥ç»§ç»­ä¿æŒç»“æ„çš„ç»Ÿä¸€æ€§ã€‚äºæ˜¯åæ¥å¢åŠ çš„ Poly ç±»å°±ä¸èƒ½ç®—æ˜¯æ¶æ„å¾ˆå¤§çš„è°ƒæ•´ï¼Œæ— éæ˜¯ç»†ææœ«èŠ‚çš„å®Œå–„ä»¥è¿åˆæ–°çš„éœ€æ±‚ï¼Œæœ€åçš„ç¬¬ä¸‰æ¬¡ä½œä¸šä¹Ÿå¯ä»¥è¯´å®Œå…¨ç»§æ‰¿äº†ç¬¬ä¸€æ¬¡ä½œä¸šçš„æ¶æ„ã€‚</p><p>â€‹ å¯èƒ½æ˜¯å› ä¸ºæ‰¾åˆ°äº†ä¸€ä¸ªç»Ÿä¸€çš„æ•°æ®ç»“æ„æ¥å­˜å‚¨å› å­ã€é¡¹å’Œè¡¨è¾¾å¼ï¼Œæˆ‘æ²¡æœ‰å†å¯¹é¡¹ç›®è¿›è¡Œç»†åŒ–å¤„ç†ã€‚æ‰€æœ‰çš„è®¡ç®—éƒ½åŒ…å«åœ¨ Element å’Œ Poly ç±»ä¸­ï¼›æ‰€æœ‰çš„è¡¨è¾¾å¼æ•´ä½“åŒ–ç®€éƒ½åœ¨ PreProcessing ç±»ä¸­ï¼›æ‰€æœ‰çš„è¯æ³•è¯­æ³•åˆ†æéƒ½åŒ…å«åœ¨ Lexer å’Œ Parser ç±»ä¸­ï¼Œç›¸äº’ä¹‹é—´çš„ä¾èµ–å…³ç³»æ¯”è¾ƒæµ…ï¼Œä¸€ä¸ªç±»å¤„ç†å®Œåäº¤ç»™å¦ä¸€ä¸ªç±»ã€‚æ€»ä½“æ¥è¯´ç±»ä¹‹é—´çš„è€¦åˆç¨‹åº¦å¾ˆä½ï¼Œæ¯ä¸ªç±»åŸºæœ¬ä¸Šåœ¨å„å¸å…¶èŒï¼Œå†…èšç¨‹åº¦æ¯”è¾ƒé«˜ã€‚</p><p>â€‹ ä½†æ˜¯æˆ‘è®¤ä¸ºè¿™ç§æ¶æ„çš„å¯æ‰©å±•æ€§ä¸å¤Ÿï¼Œå¹¶ä¸”æ²¡æœ‰å¾ˆå¥½éµå®ˆâ€ å¯¹æ–°å¢å¼€æ”¾ã€å¯¹ä¿®æ”¹å…³é—­ â€œçš„ç¼–ç¨‹åŸåˆ™ã€‚å¯ä»¥å‘ç°ä»ç¬¬ä¸€æ¬¡åˆ°ç¬¬ä¸‰æ¬¡ä½œä¸šçš„è¿‡ç¨‹ä¸­ï¼ŒElement ç±»åœ¨ä¸æ–­è†¨èƒ€ï¼Œè™½ç„¶åä¸¤æ¬¡ä¸­æ·»åŠ äº† Poly æ¥â€ åˆ†æ‹… â€œå¤„ç†è¡¨è¾¾å¼çš„èŒèƒ½ï¼Œä½†æ˜¯ä»ç„¶ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆã€‚å¦‚æœåç»­è¿˜æœ‰ç¬¬å››æ¬¡ç”šè‡³ç¬¬äº”æ¬¡è¿­ä»£ï¼Œè¿™ä¸ªæ¶æ„æœ‰ä¸¤ç§ç»“æœï¼šè¦ä¹ˆè†¨èƒ€åˆ°å¤æ‚åº¦æé«˜çš„çŠ¶æ€ï¼Œè¦ä¹ˆåªèƒ½æ¨å€’é‡æ„ã€‚å¦‚æœæƒ³è¦æé«˜å¯æ‰©å±•æ€§ï¼Œå¯ä»¥å°† Element å’Œ Parser æ‹†å¼€ï¼Œå¢åŠ å…¶ä»–çš„è¡¨è¾¾å¼å…ƒç´ ç±»å¹¶ä½¿ç”¨æ¥å£ã€‚</p><h2 id="å¿ƒå¾—ä½“ä¼š">- å¿ƒå¾—ä½“ä¼š</h2><p>â€‹ é¢å‘å¯¹è±¡ç¬¬ä¸€å•å…ƒåˆ°è¿™é‡Œå°±å‘Šä¸€æ®µè½äº†ï¼Œåœ¨æœ¬å­¦æœŸå¼€å§‹ä¹‹å‰ï¼Œæˆ‘å¯¹ OO çš„è®¾æƒ³æ˜¯ï¼šæ— éåªæ˜¯å­¦ä¸€é—¨æ–°è¯­è¨€è€Œå·²ï¼Œä½†æ˜¯è¿™ä¸€å•å…ƒå¸¦ç»™æˆ‘çš„ç»ä¸æ­¢ç†Ÿæ‚‰ Java çš„è¯­æ³•é‚£ä¹ˆç®€å•ã€‚é¢å‘å¯¹è±¡ä¸åªæ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œè¿˜æ˜¯ä¸€ç§ç†è§£ä¸–ç•Œçš„æŠ½è±¡åŒ–æ€ç»´ï¼Œå®ƒæ›´åŠ è´´è¿‘äººä»¬å¹³å¸¸è®¤è¯†äº‹ç‰©çš„æ–¹å¼ï¼Œå¹¶ä¸”ä¾¿äºè¿­ä»£å¼€å‘ï¼ˆè¿™ä¸€å•å…ƒä½¿ç”¨é¢å‘è¿‡ç¨‹ææ€•æœ€å¤šå¯ä»¥é€šè¿‡ç¬¬ä¸€æ¬¡ä½œä¸šï¼‰ã€‚æ— è®ºæ˜¯å¯¹æœªæ¥çš„ç¨‹åºè®¾è®¡è¿˜æ˜¯å¯¹è®¤è¯†ä¸–ç•Œçš„æ€ç»´æ–¹å¼ï¼Œé¢å‘å¯¹è±¡æ€æƒ³éƒ½å¤§æœ‰å¯ç”¨ä¹‹å¤„ã€‚</p>]]></content>
    
    
    <summary type="html">Expression Parsing</summary>
    
    
    
    
    <category term="BUAA OO" scheme="http://alxzzhou.github.io/tags/BUAA-OO/"/>
    
  </entry>
  
  <entry>
    <title>Algebra Chapter 0 - 1.5 Univeral Properties</title>
    <link href="http://alxzzhou.github.io/2022/01/17/Algebra-Chapter-0-1-5-Univeral-Properties/"/>
    <id>http://alxzzhou.github.io/2022/01/17/Algebra-Chapter-0-1-5-Univeral-Properties/</id>
    <published>2022-01-17T10:57:35.000Z</published>
    <updated>2022-10-21T14:32:38.483Z</updated>
    
    <content type="html"><![CDATA[<h3 id="initial-and-final-objects">Â§5.1 - Initial and final objects</h3><h4 id="definition-5.1">Definition 5.1</h4><ul><li><p>Let <span class="math inline">\(\mathsf{C}\)</span> be a category. Then object <span class="math inline">\(I\)</span> of <span class="math inline">\(\mathsf{C}\)</span> is <strong><span class="math inline">\(initial\)</span></strong> if for every object <span class="math inline">\(A\)</span> of <span class="math inline">\(\mathsf{C}\)</span> there exists <strong>exactly one</strong> morphism <span class="math inline">\(I\rightarrow A\)</span> in <span class="math inline">\(\mathsf{C}\)</span>:</p><p><span class="math inline">\(\begin{align}\forall A \in \mathsf{Obj(C)}:\mathsf{Hom_C}(I,A)\end{align}\)</span> is a singleton.</p></li><li><p>An object <span class="math inline">\(F\)</span> of <span class="math inline">\(\mathsf{C}\)</span> is <span class="math inline">\(final\)</span> in <span class="math inline">\(\mathsf{C}\)</span> if for every object <span class="math inline">\(A\)</span> of <span class="math inline">\(C\)</span> there exists <strong>exactly one</strong> morphism <span class="math inline">\(A\rightarrow F\)</span> in <span class="math inline">\(\mathsf{C}\)</span>:</p><p><span class="math inline">\(\begin{align}\forall A\in \mathsf{Obj(C)}:\ \mathsf{Hom_C}(A,F) \end{align}\)</span> is a singleton.</p></li></ul><h4 id="proposition-5.4">Proposition 5.4</h4><ul><li><span class="math inline">\(I_1,I_2\ are\ both\ inital\ objects\Rightarrow I_1\cong I_2\)</span>.</li><li><span class="math inline">\(F_1,F_2\ are\ both\ final\ objects\Rightarrow F_1\cong F_2\)</span>.</li></ul><h3 id="universal-properties">Â§5.2 Universal Properties</h3><ul><li>We say that a construction satisfies a universal property when it may be viewed as a terminal object of a category. More often, the situation is complex and the â€˜explanationâ€™ of a universal property may follow the pattern, â€œobject <span class="math inline">\(X\)</span> is universal with respect to the following property: for any <span class="math inline">\(Y\)</span> such that <span class="math inline">\(\dots\)</span> , there exists a unique morphism <span class="math inline">\(Y\rightarrow X\)</span> such that <span class="math inline">\(\dots\)</span> .â€</li></ul><h3 id="quotients">Â§5.3 Quotients</h3><ul><li><p>â€œThe quotient <span class="math inline">\(A/\sim\)</span> is universal with respect to the property of mapping <span class="math inline">\(A\)</span> to a set in such a way that equivalent elements have the same image.â€</p></li><li><p>The assertion above is talking about functions <span class="math inline">\(A\stackrel{\phi}{\longrightarrow} Z\)</span> with <span class="math inline">\(Z\)</span> any set, satisfying the property: <span class="math inline">\(a&#39;\sim a&#39;&#39;\rightarrow \phi(a&#39;)=\phi(a&#39;&#39;)\)</span>. These morphisms are objects of a category; for convenience, letâ€™s denote such an object by <span class="math inline">\((\phi,Z)\)</span>. The only reasonable way to define morphisms <span class="math inline">\((\phi_1,Z_1)\rightarrow(\phi_2,Z_2)\)</span> is as commutative diagrams</p><p><img src="/2022/01/17/Algebra-Chapter-0-1-5-Univeral-Properties/image-20220117215734905.png"></p></li></ul><h3 id="products">Â§5.4 Products</h3><ul><li><p>Let <span class="math inline">\(A\)</span>, <span class="math inline">\(B\)</span> be sets, and consider the product <span class="math inline">\(A\times B\)</span>, with the two partial projections:</p><p><img src="/2022/01/17/Algebra-Chapter-0-1-5-Univeral-Properties/image-20220303222022906.png"></p></li></ul>]]></content>
    
    
    <summary type="html">Initial and final objects</summary>
    
    
    
    
    <category term="Algebra Chapter 0" scheme="http://alxzzhou.github.io/tags/Algebra-Chapter-0/"/>
    
  </entry>
  
  <entry>
    <title>Algebra Chapter 0 - 1.3 Categories</title>
    <link href="http://alxzzhou.github.io/2021/12/10/Algebra-Chapter-0-1-3-Categories/"/>
    <id>http://alxzzhou.github.io/2021/12/10/Algebra-Chapter-0-1-3-Categories/</id>
    <published>2021-12-10T02:01:46.000Z</published>
    <updated>2022-10-21T14:33:20.173Z</updated>
    
    <content type="html"><![CDATA[<h4 id="definition-3.1.0">Definition 3.1.0</h4><p>â€‹ A <span class="math inline">\(category\)</span> <span class="math inline">\(\mathsf{C}\)</span> consists of:</p><ul><li><p>a class <span class="math inline">\(\mathrm{Obj}(\mathsf{C})\)</span> of <span class="math inline">\(objects\)</span> of the category</p></li><li><p>for every two objects <span class="math inline">\(A,B\)</span> of <span class="math inline">\(\mathsf{C}\)</span> , a set <span class="math inline">\(\mathrm{Obj}_{\mathsf{C}}(A,B)\)</span> of <span class="math inline">\(morphisms\)</span> , with the properties listed below.</p></li></ul><p>â€‹ Defining properties of morphisms:</p><ul><li>For every object <span class="math inline">\(A\)</span> of <span class="math inline">\(\mathsf{C}\)</span> , there exists (at least) one morphism <span class="math inline">\(1_A\in \mathrm{Hom}_\mathsf{C}(A,B)\)</span> , the â€˜identityâ€™ on <span class="math inline">\(A\)</span>.</li><li><span class="math inline">\(\mathrm{Hom}_\mathsf{C}(A,B)\times\mathrm{Hom}_\mathsf{C}(B,C)\)</span><span class="math inline">\(=\mathrm{Hom}_\mathsf{C}(A,C)\)</span>.</li><li>Composition Law: <span class="math inline">\((hg)f=h(gf)\)</span>.</li><li>For all <span class="math inline">\(f\in \mathrm{Hom}_\mathsf{C}(A,B)\)</span> , we have <span class="math inline">\(f1_A=1_Bf=f\)</span>.</li></ul><h4 id="definition-3.1.1">Definition 3.1.1</h4><p>â€‹ <span class="math inline">\(\mathrm{End}_\mathsf{C}(A)=\mathrm{Hom}_\mathsf{C}(A,A)\)</span>.</p><h4 id="example-3.1">Example 3.1</h4><p>â€‹ Consider category <span class="math inline">\(\mathsf{C}\)</span> , and let <span class="math inline">\(A\)</span> be an object of <span class="math inline">\(\mathsf{C}\)</span> . We define a category <span class="math inline">\(\mathsf{C}_A\)</span> whose objects are certain morphisms in <span class="math inline">\(\mathsf{C}\)</span> : <span class="math inline">\(\mathrm{Obj}(\mathsf{C}_A)=all\ morphisms\ from\ \)</span><span class="math inline">\(any\ object\ of\ \mathsf{C}\ to\ A\)</span> . Pictorially, an object in <span class="math inline">\(\mathsf{C}_{A}\)</span> is an arrow <span class="math inline">\(Z\stackrel{f}{\rightarrow}A\)</span> .</p><p>â€‹ Suppose <span class="math inline">\(Z_1\stackrel{f_1}{\longrightarrow}A\)</span> and <span class="math inline">\(Z_2\stackrel{f_2}{\longrightarrow}A\)</span> , morphisms <span class="math inline">\(f_1\rightarrow f_2\)</span> are defined to be commutative diagrams shown below.</p><p><img src="/2021/12/10/Algebra-Chapter-0-1-3-Categories/Gr_1"></p><p>â€‹ The composition of morphisms in <span class="math inline">\(\mathsf{C}\)</span> can be verified without difficulty. Categories constructed in this pattern is called <span class="math inline">\(slice \  category\)</span> , which is a special form of <span class="math inline">\(comma\ category\)</span> .</p><h4 id="example-3.2">Example 3.2</h4><p>â€‹ An similar example of <strong>Example 3.1</strong> can be obtained by considering morphisms in a category <span class="math inline">\(\mathsf{C}\)</span> from a fixed object <span class="math inline">\(A\)</span> to all objects in <span class="math inline">\(\mathsf{C}\)</span>, with morphisms defined by suitable commutative diagrams. The category defined above is called <span class="math inline">\(coslice\ category\)</span>.</p><h4 id="example-3.3">Example 3.3</h4><p>â€‹ An example of coslice category is shown by letting <span class="math inline">\(\mathsf{C=Set}\)</span> and <span class="math inline">\(A=\)</span> a fixed singleton <span class="math inline">\(\mathbb{S}\)</span>. We call this category <span class="math inline">\(\mathsf{Set^*}\)</span>.</p><p>â€‹ An object in this category is a morphism <span class="math inline">\(f:\mathbb{S}\rightarrow S\)</span> in <span class="math inline">\(\mathsf{Set}\)</span> where <span class="math inline">\(S\)</span> is any set. The information of ab object in <span class="math inline">\(\mathsf{Set^*}\)</span> consists of the choice of a nonempty set <span class="math inline">\(S\)</span> and an element <span class="math inline">\(s\in S\)</span> which is the element <span class="math inline">\(f(*)\)</span>. Thus we may denote objects in this category as pairs <span class="math inline">\((S,s)\)</span>. A morphism between two such objects, <span class="math inline">\((S,s)\rightarrow(T,t)\)</span>, corresponds to a set function <span class="math inline">\(\sigma:S\rightarrow T\)</span> such that <span class="math inline">\(\sigma(s)=t\)</span>.</p><p>â€‹ Objects of <span class="math inline">\(\mathsf{Set}^*\)</span> are called â€˜pointed setsâ€™ and many structures are pointed sets. For example, <strong>group homomorphisms</strong> sends one identity to another.</p>]]></content>
    
    
    <summary type="html">Fundamental definitions of category</summary>
    
    
    
    
    <category term="Algebra Chapter 0" scheme="http://alxzzhou.github.io/tags/Algebra-Chapter-0/"/>
    
  </entry>
  
  <entry>
    <title>ã€Œå¤åˆ†æã€Chapter1ï¼šå¾®ç§¯åˆ†</title>
    <link href="http://alxzzhou.github.io/2021/12/07/%E5%A4%8D%E5%88%86%E6%9E%90Chapter1/"/>
    <id>http://alxzzhou.github.io/2021/12/07/%E5%A4%8D%E5%88%86%E6%9E%90Chapter1/</id>
    <published>2021-12-07T04:21:49.000Z</published>
    <updated>2022-10-21T14:34:00.621Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€å›é¡¾">ä¸€ã€å›é¡¾</h2><h4 id="å¤–å¾®åˆ†å½¢å¼r3">å¤–å¾®åˆ†å½¢å¼ï¼ˆ<span class="math inline">\(R^3\)</span>ï¼‰</h4><ul><li><p><span class="math inline">\(\mathrm {d} x\)</span> ä¸ <span class="math inline">\(\mathrm {d} y\)</span> å¤–ä¹˜ç§¯è®°ä½œ <span class="math inline">\(\mathrm {d} xâˆ§\mathrm {d} y\)</span>ï¼Œä¸”æœ‰å…³ç³» <span class="math inline">\(\mathrm {d} xâˆ§\mathrm {d} y=-\mathrm {d} yâˆ§\mathrm {d} x\)</span>.</p></li><li><p>å¯¹å¤–å¾®åˆ†å½¢å¼ <span class="math inline">\(\omega\)</span> å®šä¹‰å¾®åˆ†ç®—å­ <span class="math inline">\(\mathrm {d}\)</span>ï¼Œåˆ™æœ‰ï¼š</p></li></ul><h5 id="omegaf-rightarrow-mathrm-domegafrac-partial-fpartial-xmathrm-d-xfrac-partial-fpartial-ymathrm-d-yfrac-partial-fpartial-zmathrm-d-z"><span class="math inline">\(â‘ \omega=f \rightarrow \mathrm {d}\omega=\frac {\partial f}{\partial x}\mathrm {d} x+\frac {\partial f}{\partial y}\mathrm {d} y+\frac {\partial f}{\partial z}\mathrm {d} z\)</span></h5><h5 id="begin-splitâ‘¡omegasumlimits_cyc-amathrm-d-ywedge-mathrm-d-z-rightarrow-mathrm-domegasumlimits_cyc-frac-partial-apartial-xmathrm-d-xwedge-mathrm-d-ywedge-mathrm-d-zend-split"><span class="math inline">\(\begin {split}â‘¡&amp;\omega=\sum\limits_{cyc} A\mathrm {d} y\wedge \mathrm {d} z \\&amp;\Rightarrow \mathrm {d}\omega=(\sum\limits_{cyc} \frac {\partial A}{\partial x})\mathrm {d} x\wedge \mathrm {d} y\wedge \mathrm {d} z\end {split}\)</span></h5><h5 id="begin-splitâ‘¢-omega-pmathrm-d-xqmathrm-d-yrmathrm-d-zrightarrow-mathrm-domegasumlimits_cycfrac-partial-rpartial-y-frac-partial-qpartial-zmathrm-d-ymathrm-d-z-end-split"><span class="math inline">\(\begin {split}â‘¢\ &amp;\omega =P\mathrm {d} x+Q\mathrm {d} y+R\mathrm {d} z\\&amp;\Rightarrow \mathrm {d}\omega=\sum\limits_{cyc}(\frac {\partial R}{\partial y}-\frac {\partial Q}{\partial z})\mathrm {d} yâˆ§\mathrm {d} z \end {split}\)</span></h5><h5 id="omega-h-mathrm-d-xwedgemathrm-d-ywedgemathrm-d-zrightarrowmathrm-domega0"><span class="math inline">\(â‘£\omega = H \mathrm {d} x\wedge\mathrm {d} y\wedge\mathrm {d} z\Rightarrow\mathrm {d}\omega=0\)</span></h5><ul><li><p><span class="math inline">\((Poincare\ Lemma)\)</span>â€‹ <span class="math inline">\(\omega\)</span>â€‹æ˜¯å¤–å¾®åˆ†å½¢å¼ä¸”ç³»æ•°æœ‰äºŒé˜¶è¿ç»­åå¯¼ç­‰ä»·äº <span class="math inline">\(\mathrm {d}\mathrm {d}\omega=0\)</span>â€‹.ï¼ˆå³è‹¥ <span class="math inline">\(p\)</span>â€‹æ¬¡å¤–å¾®åˆ†å½¢å¼ <span class="math inline">\(\omega\)</span>â€‹æœ‰ <span class="math inline">\(\mathrm {d}\omega=0\)</span>â€‹åˆ™å­˜åœ¨ <span class="math inline">\(p-1\)</span>â€‹æ¬¡å¤–å¾®åˆ†å½¢å¼ <span class="math inline">\(\alpha\)</span>â€‹ä½¿å¾— <span class="math inline">\(\omega=\mathrm {d}\alpha\)</span>â€‹ï¼‰</p></li><li><p>ç»Ÿä¸€ <span class="math inline">\(Greenã€Gaussã€Stokes\)</span>â€‹å…¬å¼ï¼š<span class="math display">\[\begin {align}\int_{\partial\Sigma}\ \omega=\int_{\Sigma}\ \mathrm {d}\omega\end {align}\]</span>.â€‹</p></li></ul><h2 id="äºŒå¤å¾®åˆ†">äºŒã€å¤å¾®åˆ†</h2><ul><li><span class="math inline">\(f:\mathbb {C}\rightarrow\mathbb {C}\)</span>â€‹ï¼Œå¯¼æ•°å®šä¹‰ç±»ä¼¼ã€‚è‹¥ <span class="math inline">\(f (z)\)</span>â€‹åœ¨å®šä¹‰åŸŸä¸Šæ¯ä¸€ç‚¹å¯å¾®ï¼Œåˆ™ç§° <span class="math inline">\(f\)</span>â€‹ è§£ææˆ–å…¨çº¯.</li><li><span class="math inline">\((Cauchy-Riemann)\)</span>â€‹ è‹¥ <span class="math inline">\(f (z)=u (x,y)+iv (x,y)\)</span>â€‹åœ¨ <span class="math inline">\(z_{0}=x_{0}+iy_{0}\)</span>â€‹å¤„å¯å¾®ï¼Œåˆ™æœ‰</li></ul><p><span class="math display">\[\begin {align} f&#39;(z_{0})&amp;=u&#39;_{x}(x_{0},y_{0})+iv&#39;_{x}(x_{0},y_{0})\\&amp;=v&#39;_{y}(x_{0},y_{0})-iu&#39;_{x}(x_{0},y_{0})\end {align}\]</span></p><p>ï¼Œç”±æ­¤ç«‹å³æ¨å‡ºï¼š <span class="math display">\[\begin {aligned}\frac {\partial f}{\partial x}+i\frac {\partial f}{\partial y}=0\ or\left\{\begin {matrix} u&#39;_{x}=v&#39;_{y}\\u&#39;_{y}=-v&#39;_{x}\end {matrix}\right.\end {aligned}\]</span></p><ul><li><p><span class="math inline">\(f (z)=u+iv\)</span> åœ¨ <span class="math inline">\(D\)</span> å†…å…¨çº¯ <span class="math inline">\(\Leftrightarrow\)</span><span class="math inline">\(u,v\)</span> åœ¨ <span class="math inline">\(D\)</span> å†…æœ‰ä¸€é˜¶è¿ç»­åå¾®å•†ä¸”æ»¡è¶³ <span class="math inline">\(Cauchy-Riemann\)</span> æ¡ä»¶.</p></li><li><p>äº‹å®ä¸Šï¼Œå¦‚æœ <span class="math inline">\(f (z)=u+iv\)</span>â€‹åœ¨ <span class="math inline">\(D\)</span>â€‹å†…å…¨çº¯ï¼Œåˆ™ <span class="math inline">\(f&#39;(z)\)</span>â€‹ä¹Ÿåœ¨ <span class="math inline">\(D\)</span>â€‹å†…å…¨çº¯ï¼Œç”±æ­¤å¾—åˆ° <span class="math inline">\(\Delta u=\Delta v=0\)</span>â€‹.</p></li><li><p>å¼•å…¥è®°å·ï¼š <span class="math display">\[\left\{\begin {align}\frac {\partial}{\partial z}=\frac {1}{2}(\frac {\partial}{\partial x}-i\frac {\partial}{\partial y})\\\frac {\partial}{\partial \bar {z}}=\frac {1}{2}(\frac {\partial}{\partial x}+i\frac {\partial}{\partial y})\end {align}.\right.\]</span></p></li></ul><p>åˆ™ <span class="math inline">\(f\)</span> å…¨çº¯ <span class="math inline">\(\Leftrightarrow\)</span> <span class="math inline">\(\begin {align}\frac {\partial f}{\partial \bar {z}}=0\end {align}\)</span>ï¼ŒåŒæ—¶ <span class="math inline">\(\begin {align}\Delta =4\frac {\partial^2}{\partial z\partial \bar {z}}=4\frac {\partial^2}{\partial \bar {z}\partial z}\end {align}\)</span>.</p><ul><li><span class="math inline">\(\begin {align}\mathrm {d} f=\frac {\partial f}{\partial x}\mathrm {d} x+\frac {\partial f}{\partial y}\mathrm {d} y=\frac {\partial f}{\partial z}\mathrm {d} z+\frac {\partial f}{\partial \bar {z}}\mathrm {d}\bar {z} \end {align}\)</span>ï¼Œ è®° <span class="math inline">\(\begin {align}\partial f=\frac {\partial f}{\partial z}\mathrm {d} z,\bar {\partial} f=\frac {\partial f}{\partial \bar {z}}\mathrm {d}\bar {z} \end {align}\)</span>ï¼Œåˆ™ <span class="math inline">\(\mathrm {d}=\partial+\bar {\partial}\)</span>.</li><li>ï¼ˆå…±å½¢æ€§ï¼‰è®¾ <span class="math inline">\(f\)</span> åœ¨ <span class="math inline">\(D\)</span> å…¨çº¯ï¼Œ<span class="math inline">\(z_0\in D\)</span> ä¸” <span class="math inline">\(f&#39;(z_0)\neq0\)</span>ï¼Œæ›²çº¿ <span class="math inline">\(\gamma\)</span> æ»¡è¶³ <span class="math inline">\(\gamma (t)\ (0\leq t\leq1)\)</span> åœ¨ <span class="math inline">\(D\)</span> å†…è¿‡ <span class="math inline">\(z_0\)</span> ä¸” <span class="math inline">\(\gamma (0)=z_0\)</span>ï¼Œ<span class="math inline">\(\gamma (t)\)</span> åœ¨ <span class="math inline">\(z_0\)</span> å¤„å’Œå®è½´çš„å¤¹è§’ä¸º <span class="math inline">\(arg\ \gamma&#39;(t)\)</span>ï¼Œ<span class="math inline">\(f\)</span> æŠŠ <span class="math inline">\(\gamma\)</span> æ˜ å°„æˆæ›²çº¿ <span class="math inline">\(\sigma (t)=f (\gamma (t))\)</span>ï¼Œåˆ™ <span class="math inline">\(\sigma&#39;(t)=\gamma&#39;(t) f&#39;(\gamma (t))\)</span>ï¼Œå› æ­¤ <span class="math inline">\(arg\ f&#39;(z_0)=arg\ \sigma&#39;(0)-arg\ \gamma&#39;(0)\)</span><strong>ï¼ˆä¿è§’æ€§ï¼‰</strong>. å¦å¤–ï¼Œæœ‰ <span class="math inline">\(\begin {align}\frac {\vert {f (z)-f (z_0)}\vert}{\vert z-z_0\vert}=\frac {\vert\omega-\omega_0\vert}{\vert z-z_0\vert}\rightarrow\vert f&#39;(z_0)\vert (z\rightarrow z_0,z\in \gamma) \end {align}\)</span>.</li></ul><h2 id="ä¸‰å¤ç§¯åˆ†">ä¸‰ã€å¤ç§¯åˆ†</h2><ul><li><p><span class="math inline">\(\begin {align} f=u+iv\Rightarrow\int f (t)\mathrm {d} t=\int u (t)\mathrm {d} t+i\int v (t)\mathrm {d} t \end {align}.\)</span></p></li><li><p>è‹¥ <span class="math inline">\(\gamma\)</span> å¯æ±‚é•¿ï¼Œåˆ™ï¼š<span class="math inline">\(\begin {align}\int_\gamma f (z)\mathrm {d} z=\int_\gamma (u+iv)(\mathrm {d} x+i\mathrm {d} y) \end {align}.\)</span></p></li><li><p>å¤å¤–å¾®åˆ†å½¢å¼ï¼š<span class="math inline">\(\mathrm {d}\bar {z} \wedge \mathrm {d} z=2i\mathrm {d} x\wedge\mathrm {d} y=2i\mathrm {d} A.\)</span></p></li><li><p>å¤å½¢å¼çš„ Green å…¬å¼ï¼šè‹¥ <span class="math inline">\(\omega=\omega_1\mathrm {d} z+\omega_2\mathrm {d} z\)</span> ä¸º <span class="math inline">\(\Omega\)</span> ä¸Šçš„ä¸€æ¬¡å¤–å¾®åˆ†ç®—å­ï¼Œ<span class="math inline">\(\omega_1,\omega_2\)</span> ä¸º <span class="math inline">\(z,\bar {z}\)</span> çš„å¯å¾®å‡½æ•°ï¼Œåˆ™æœ‰ <span class="math inline">\(\begin {align}\int_{\partial \Omega}\omega=\iint_\Omega \mathrm {d}\omega \end {align}.\)</span></p></li></ul>]]></content>
    
    
    <summary type="html">Basic definitions</summary>
    
    
    
    
    <category term="å¤åˆ†æ" scheme="http://alxzzhou.github.io/tags/%E5%A4%8D%E5%88%86%E6%9E%90/"/>
    
  </entry>
  
</feed>
